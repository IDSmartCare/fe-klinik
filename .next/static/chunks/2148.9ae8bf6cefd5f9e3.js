"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2148],{16463:function(e,n,a){var t=a(71169);a.o(t,"useRouter")&&a.d(n,{useRouter:function(){return t.useRouter}})},2148:function(e,n,a){a.r(n);var t=a(57437),l=a(66893),s=a(16463),i=a(2265),o=a(39343);n.default=e=>{var n,a;let{asuransi:r}=e,d=document.getElementById("search-patient"),[c,u]=(0,i.useState)("NoRM"),[m,p]=(0,i.useState)(!1),x=(0,s.useRouter)(),{register:h,handleSubmit:b,formState:{errors:N},reset:f}=(0,o.cI)(),k=e=>{u(e),f()},j=async e=>{let n={rm:null==e?void 0:e.noRM,nik:null==e?void 0:e.nik};try{p(!0);let e=await fetch("/api/antrian/searchpasien",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await e.json();if(!a.success){p(!1),d.close(),(0,l.K)({icon:"error",title:"Ooops",text:"Pasien tidak ditemukan"});return}"insurance"===r?x.push("/antrian/detail/".concat(a.data.id,"/").concat(r)):x.push("/antrian/detail/".concat(a.data.id))}catch(e){p(!1),d.close(),console.log(e),(0,l.K)({icon:"error",title:"Ooops",text:e.message})}};return(0,t.jsx)("dialog",{id:"search-patient",className:"modal",children:(0,t.jsx)("div",{className:"modal-box w-8/12 max-w-2xl",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("form",{onSubmit:b(j),className:"flex flex-col gap-2 mt-5",children:[(0,t.jsxs)("div",{className:"flex bg-gray-200 rounded-md w-full py-3 px-3 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>k("NoRM"),className:"py-2 w-full transition-all duration-500 rounded-md \n                ".concat("NoRM"===c?"bg-primary shadow text-white":""),children:"Nomor Rekam Medis"}),(0,t.jsx)("button",{type:"button",onClick:()=>k("NIK"),className:"py-2 px-3 w-full transition-all duration-500 rounded-md \n                ".concat("NIK"===c?"bg-primary shadow text-white":""),children:"Nomor Induk Kependudukan"})]}),"NoRM"===c&&(0,t.jsxs)("div",{className:"form-control w-full mb-2",children:[(0,t.jsx)("div",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Nomor Rekam Medis"})}),(0,t.jsx)("input",{type:"number",placeholder:"Nomor Rekam Medis",...h("noRM",{required:"Tidak boleh kosong!"}),className:"input input-md input-bordered input-primary w-full"}),(0,t.jsx)("span",{className:"label-text-alt text-error",children:N.noRM&&(0,t.jsx)("span",{children:null===(n=N.noRM.message)||void 0===n?void 0:n.toString()})})]}),"NIK"===c&&(0,t.jsxs)("div",{className:"form-control w-full mb-2",children:[(0,t.jsx)("div",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Nomor Induk Kependudukan"})}),(0,t.jsx)("input",{type:"number",placeholder:"Nomor Induk Kependudukan",...h("nik",{required:"Tidak boleh kosong!"}),className:"input input-md input-bordered input-primary w-full"}),(0,t.jsx)("span",{className:"label-text-alt text-error",children:N.nik&&(0,t.jsx)("span",{children:null===(a=N.nik.message)||void 0===a?void 0:a.toString()})})]})]}),(0,t.jsxs)("div",{className:"self-end flex gap-3 mt-3",children:[!m&&(0,t.jsx)("form",{method:"dialog",children:(0,t.jsx)("button",{className:"btn btn-error btn-md rounded-xl text-white",children:"Keluar"})}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary btn-md rounded-xl",onClick:b(j),disabled:m,children:m?"Tunggu":"Submit"})]})]})})})}}}]);