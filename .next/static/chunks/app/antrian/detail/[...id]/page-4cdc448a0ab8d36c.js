(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{59555:function(e,t,a){Promise.resolve().then(a.bind(a,83746)),Promise.resolve().then(a.bind(a,86593))},92682:function(e,t,a){"use strict";a.d(t,{ZP:function(){return i}});var n=a(17792),s=a(22988),r=a(2265),l=a(43139);a(31818),a(54887),a(92658);var i=(0,r.forwardRef)(function(e,t){var a=(0,n.u)(e);return r.createElement(l.S,(0,s.Z)({ref:t},a))})},83746:function(e,t,a){"use strict";var n=a(57437),s=a(92682),r=a(39343),l=a(2265),i=a(76789),o=a(75162),c=a(16463),u=a(41087),d=a(34446),m=a(58606),h=a(57818),b=a(95525);let x=(0,h.default)(()=>Promise.all([a.e(249),a.e(7448),a.e(7282),a.e(998),a.e(5457),a.e(4937)]).then(a.bind(a,27295)),{loadableGenerated:{webpack:()=>[27295]},ssr:!1});t.default=e=>{var t,a,h;let{idpasien:f,session:p,asuransi:v}=e,[g,j]=(0,l.useState)(!1),[k,N]=(0,l.useState)(null),{handleSubmit:S,formState:{errors:y},reset:w,control:A,register:I}=(0,r.cI)(),D=(0,l.useId)(),[P,C]=(0,l.useState)([]),[T,F]=(0,l.useState)([]),M=(0,c.useRouter)(),E=new Date().getDay(),[B,R]=(0,l.useState)(""),[J,O]=(0,l.useState)(""),[_,G]=(0,l.useState)(""),[H,Z]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{let e=await fetch("".concat("http://localhost:8000","/masterasuransi/").concat(null==p?void 0:p.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!e.ok){F([]);return}let t=await e.json();if(!t.success||!t.data){F([]);return}F(t.data.map(e=>({value:e.kodeAsuransi,label:e.namaAsuransi})))})()},[null==p?void 0:p.user.idFasyankes]),(0,l.useEffect)(()=>{(async()=>{var e;let t=new Date().getDay(),a=await fetch("".concat("http://localhost:8000","/dokter/jadwaldokter/").concat(t,"/").concat(null==p?void 0:p.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!a.ok){C([]);return}let n=await a.json();if(!n.success||!n.data){C([]);return}C(null===(e=n.data)||void 0===e?void 0:e.flatMap(e=>e.days.flatMap(t=>t.times.map(a=>({value:e.id,label:"".concat(e.name," - ").concat(e.unit," (").concat(a.from," - ").concat(a.to,")"),idHari:t.id,idJamPraktek:a.id})))))})()},[null==p?void 0:p.user.idFasyankes]);let z=async e=>{var t;let a={pasienData:{pasienId:Number(f),doctorId:Number(e.dokterId.value),penjamin:v?"ASURANSI":"PRIBADI",namaAsuransi:null===(t=e.namaAsuransi)||void 0===t?void 0:t.label,nomorAsuransi:e.nomorAsuransi,idFasyankes:null==p?void 0:p.user.idFasyankes,availableDayId:e.dokterId.idHari,availableTimeId:e.dokterId.idJamPraktek,hari:E},userRole:null==p?void 0:p.user.role,userPackage:null==p?void 0:p.user.package};try{let e=await fetch("/api/pasien/addregistrasi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let t=await e.json();t.message?(0,o.o)({icon:"error",title:t.message}):(0,o.o)({icon:"error",title:"Gagal simpan data!"});return}let t=await e.json();N(t.nomorAntrian),O((0,b.e)().tanggal),R((0,b.e)().jam),G(t.registrasi.doctor.unit),(0,o.o)({icon:"success",title:"Berhasil!"}),w(),j(!0)}catch(e){console.log(e),(0,o.o)({icon:"error",title:"Gagal!"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{nomorAntrian:k,tanggalDaftar:J,jamDaftar:B,poli:_}),(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)(d.M,{children:g&&(0,n.jsx)(m.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.5,delay:.7},className:"absolute bottom-0 w-full flex justify-center z-[999]",children:(0,n.jsx)(u.F,{onBatalClick:()=>{j(!1),setTimeout(()=>{M.push("/antrian")},2e3)},nomor:k,poli:_,title:"Pasien",onPrintTicket:()=>{var e;let t=null===(e=document)||void 0===e?void 0:e.getElementById("modal-antrian-pasien");null==t||t.showModal()}})},"ticket-component")})}),(0,n.jsxs)("form",{onSubmit:S(z),children:[(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Dokter Yang Tersedia Hari Ini"})}),(0,n.jsx)(r.Qr,{name:"dokterId",control:A,rules:{required:"*Silahkan pilih"},render:e=>{let{field:t}=e;return(0,n.jsx)(s.ZP,{...t,isClearable:!0,instanceId:D,options:P,onChange:e=>{t.onChange(e)}})}}),y.dokterId&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(t=y.dokterId.message)||void 0===t?void 0:t.toString()})})]}),v&&(0,n.jsxs)("div",{className:"mt-1",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Asuransi"})}),(0,n.jsx)(r.Qr,{name:"namaAsuransi",control:A,rules:{required:"*Silahkan pilih"},render:e=>{let{field:t}=e;return(0,n.jsx)(s.ZP,{...t,isClearable:!0,instanceId:D,options:T})}}),y.namaAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(a=y.namaAsuransi.message)||void 0===a?void 0:a.toString()})}),(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Nomor Asuransi"})}),(0,n.jsx)("input",{...I("nomorAsuransi",{required:"*Tidak boleh kosong"}),type:"number",value:H,onChange:e=>Z(e.target.value),className:"input input-primary w-full input-sm"})]}),y.nomorAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(h=y.nomorAsuransi.message)||void 0===h?void 0:h.toString()})})]}),(null==p?void 0:p.user.role)!=="tester"&&(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(i.v,{})})]})]})}},41087:function(e,t,a){"use strict";a.d(t,{F:function(){return r}});var n=a(57437),s=a(66648);let r=e=>{let{onPrintTicket:t,onBatalClick:a,nomor:r,title:l,poli:i,administrasi:o}=e;return(0,n.jsxs)("div",{className:"relative flex flex-col items-center justify-center bottom-[-80px]",children:[(0,n.jsx)(s.default,{src:"/ticket.png",alt:"ticket",height:400,width:400}),(0,n.jsxs)("div",{className:"absolute top-24 flex flex-col gap-5 text-center",children:[(0,n.jsxs)("span",{className:"text-2xl font-bold",children:["Antrian ",l]}),(0,n.jsx)("span",{className:"text-7xl font-bold",children:r})]}),(0,n.jsxs)("div",{className:"absolute top-96 flex flex-col gap-5",children:[o&&(0,n.jsxs)("span",{className:"text-lg font-bold",children:["Silahkan Menuju ",o]}),i&&(0,n.jsxs)("span",{className:"text-lg font-bold",children:["Silahkan Menuju ",i]}),(0,n.jsx)("button",{className:"btn btn-sm btn-primary",onClick:t,children:"Print Tiket"}),(0,n.jsx)("button",{className:"btn btn-sm btn-error text-white",onClick:a,children:"Tutup"})]})]})}},86593:function(e,t,a){"use strict";var n=a(57437);a(2265);var s=a(16463);t.default=()=>{let e=(0,s.useRouter)();return(0,n.jsxs)("button",{className:"btn btn-sm btn-primary w-max",onClick:()=>e.back(),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z",clipRule:"evenodd"})}),"Kembali"]})}},76789:function(e,t,a){"use strict";a.d(t,{v:function(){return r}});var n=a(57437),s=a(54887);function r(){let{pending:e}=(0,s.useFormStatus)();return(0,n.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},95525:function(e,t,a){"use strict";a.d(t,{L:function(){return n},e:function(){return s}});let n=()=>{let e=new Date,t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][e.getDay()],a=e.getDate(),n=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()],s=e.getFullYear();return"".concat(t,", ").concat(a," ").concat(n," ").concat(s)},s=()=>{let e=new Date,t=e.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return{tanggal:t,jam:"".concat(a,":").concat(n,":").concat(s)}}},75162:function(e,t,a){"use strict";a.d(t,{o:function(){return r}});var n=a(64379),s=a.n(n);function r(e){let{icon:t,title:a}=e;s().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=s().stopTimer,e.onmouseleave=s().resumeTimer}}).fire({icon:t,title:a})}}},function(e){e.O(0,[9461,9343,5151,8173,3060,2971,7023,1744],function(){return e(e.s=59555)}),_N_E=e.O()}]);