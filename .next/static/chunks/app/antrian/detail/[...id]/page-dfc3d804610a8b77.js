(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{59555:function(e,a,t){Promise.resolve().then(t.bind(t,83746)),Promise.resolve().then(t.bind(t,86593))},92682:function(e,a,t){"use strict";t.d(a,{ZP:function(){return i}});var n=t(17792),s=t(22988),r=t(2265),l=t(43139);t(31818),t(54887),t(92658);var i=(0,r.forwardRef)(function(e,a){var t=(0,n.u)(e);return r.createElement(l.S,(0,s.Z)({ref:a},t))})},83746:function(e,a,t){"use strict";var n=t(57437),s=t(92682),r=t(39343),l=t(2265),i=t(76789),o=t(75162),c=t(16463),u=t(41087),d=t(34446),m=t(58606),h=t(57818),b=t(95525);let x=(0,h.default)(()=>Promise.all([t.e(249),t.e(7448),t.e(7282),t.e(998),t.e(5457),t.e(4937)]).then(t.bind(t,27295)),{loadableGenerated:{webpack:()=>[27295]},ssr:!1});a.default=e=>{var a,t,h;let{idpasien:f,session:p,asuransi:v}=e,[g,j]=(0,l.useState)(!1),[k,N]=(0,l.useState)(null),{handleSubmit:S,formState:{errors:y},reset:w,control:A,register:I}=(0,r.cI)(),D=(0,l.useId)(),[P,C]=(0,l.useState)([]),[T,F]=(0,l.useState)([]),M=(0,c.useRouter)(),E=new Date().getDay(),[B,R]=(0,l.useState)(""),[J,_]=(0,l.useState)(""),[O,G]=(0,l.useState)(""),[H,Z]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{let e=await fetch("".concat("http://localhost:8000","/masterasuransi/").concat(null==p?void 0:p.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!e.ok){F([]);return}let a=await e.json();if(!a.success||!a.data){F([]);return}F(a.data.map(e=>({value:e.kodeAsuransi,label:e.namaAsuransi})))})()},[null==p?void 0:p.user.idFasyankes]),(0,l.useEffect)(()=>{(async()=>{var e;let a=new Date().getDay(),t=await fetch("".concat("http://localhost:8000","/dokter/jadwaldokter/").concat(a,"/").concat(null==p?void 0:p.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!t.ok){C([]);return}let n=await t.json();if(!n.success||!n.data){C([]);return}C([...null===(e=n.data)||void 0===e?void 0:e.flatMap(e=>e.jam_praktek.map(a=>({value:e.id,label:"".concat(e.name," -  ").concat(e.unit," (").concat(a.from," - ").concat(a.to,")"),idHari:e.hari.id,idJamPraktek:a.id})))])})()},[null==p?void 0:p.user.idFasyankes]);let z=async e=>{var a;let t={pasienData:{pasienId:Number(f),doctorId:Number(e.dokterId.value),penjamin:v?"ASURANSI":"PRIBADI",namaAsuransi:null===(a=e.namaAsuransi)||void 0===a?void 0:a.label,nomorAsuransi:e.nomorAsuransi,idFasyankes:null==p?void 0:p.user.idFasyankes,availableDayId:e.dokterId.idHari,availableTimeId:e.dokterId.idJamPraktek,hari:E},userRole:null==p?void 0:p.user.role,userPackage:null==p?void 0:p.user.package};try{let e=await fetch("/api/pasien/addregistrasi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let a=await e.json();a.message?(0,o.o)({icon:"error",title:a.message}):(0,o.o)({icon:"error",title:"Gagal simpan data!"});return}let a=await e.json();N(a.nomorAntrian),_((0,b.e)().tanggal),R((0,b.e)().jam),G(a.registrasi.doctor.unit),(0,o.o)({icon:"success",title:"Berhasil!"}),w(),j(!0)}catch(e){console.log(e),(0,o.o)({icon:"error",title:"Gagal!"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{nomorAntrian:k,tanggalDaftar:J,jamDaftar:B,poli:O}),(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)(d.M,{children:g&&(0,n.jsx)(m.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{duration:.5,delay:.7},className:"absolute bottom-0 w-full flex justify-center z-[999]",children:(0,n.jsx)(u.F,{onBatalClick:()=>{j(!1),setTimeout(()=>{M.push("/antrian")},2e3)},nomor:k,poli:O,title:"Pasien",onPrintTicket:()=>{var e;let a=null===(e=document)||void 0===e?void 0:e.getElementById("modal-antrian-pasien");null==a||a.showModal()}})},"ticket-component")})}),(0,n.jsxs)("form",{onSubmit:S(z),children:[(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Dokter Yang Tersedia Hari Ini"})}),(0,n.jsx)(r.Qr,{name:"dokterId",control:A,rules:{required:"*Silahkan pilih"},render:e=>{let{field:a}=e;return(0,n.jsx)(s.ZP,{...a,isClearable:!0,instanceId:D,options:P,onChange:e=>{a.onChange(e)}})}}),y.dokterId&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(a=y.dokterId.message)||void 0===a?void 0:a.toString()})})]}),v&&(0,n.jsxs)("div",{className:"mt-1",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Asuransi"})}),(0,n.jsx)(r.Qr,{name:"namaAsuransi",control:A,rules:{required:"*Silahkan pilih"},render:e=>{let{field:a}=e;return(0,n.jsx)(s.ZP,{...a,isClearable:!0,instanceId:D,options:T})}}),y.namaAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(t=y.namaAsuransi.message)||void 0===t?void 0:t.toString()})}),(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Nomor Asuransi"})}),(0,n.jsx)("input",{...I("nomorAsuransi",{required:"*Tidak boleh kosong"}),type:"number",value:H,onChange:e=>Z(e.target.value),className:"input input-primary w-full input-sm"})]}),y.nomorAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(h=y.nomorAsuransi.message)||void 0===h?void 0:h.toString()})})]}),(null==p?void 0:p.user.role)!=="tester"&&(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(i.v,{})})]})]})}},41087:function(e,a,t){"use strict";t.d(a,{F:function(){return r}});var n=t(57437),s=t(66648);let r=e=>{let{onPrintTicket:a,onBatalClick:t,nomor:r,title:l,poli:i,administrasi:o}=e;return(0,n.jsxs)("div",{className:"relative flex flex-col items-center justify-center bottom-[-80px]",children:[(0,n.jsx)(s.default,{src:"/ticket.png",alt:"ticket",height:400,width:400}),(0,n.jsxs)("div",{className:"absolute top-24 flex flex-col gap-5 text-center",children:[(0,n.jsxs)("span",{className:"text-2xl font-bold",children:["Antrian ",l]}),(0,n.jsx)("span",{className:"text-7xl font-bold",children:r})]}),(0,n.jsxs)("div",{className:"absolute top-96 flex flex-col gap-5",children:[o&&(0,n.jsxs)("span",{className:"text-lg font-bold",children:["Silahkan Menuju ",o]}),i&&(0,n.jsxs)("span",{className:"text-lg font-bold",children:["Silahkan Menuju ",i]}),(0,n.jsx)("button",{className:"btn btn-sm btn-primary",onClick:a,children:"Print Tiket"}),(0,n.jsx)("button",{className:"btn btn-sm btn-error text-white",onClick:t,children:"Tutup"})]})]})}},86593:function(e,a,t){"use strict";var n=t(57437);t(2265);var s=t(16463);a.default=()=>{let e=(0,s.useRouter)();return(0,n.jsxs)("button",{className:"btn btn-sm btn-primary w-max",onClick:()=>e.back(),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z",clipRule:"evenodd"})}),"Kembali"]})}},76789:function(e,a,t){"use strict";t.d(a,{v:function(){return r}});var n=t(57437),s=t(54887);function r(){let{pending:e}=(0,s.useFormStatus)();return(0,n.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},95525:function(e,a,t){"use strict";t.d(a,{L:function(){return n},e:function(){return s}});let n=()=>{let e=new Date,a=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][e.getDay()],t=e.getDate(),n=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()],s=e.getFullYear();return"".concat(a,", ").concat(t," ").concat(n," ").concat(s)},s=()=>{let e=new Date,a=e.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return{tanggal:a,jam:"".concat(t,":").concat(n,":").concat(s)}}},75162:function(e,a,t){"use strict";t.d(a,{o:function(){return r}});var n=t(64379),s=t.n(n);function r(e){let{icon:a,title:t}=e;s().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=s().stopTimer,e.onmouseleave=s().resumeTimer}}).fire({icon:a,title:t})}}},function(e){e.O(0,[9461,9343,5151,8173,3060,2971,7023,1744],function(){return e(e.s=59555)}),_N_E=e.O()}]);