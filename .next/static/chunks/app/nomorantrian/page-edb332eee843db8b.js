(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8460],{43845:function(e,t,a){Promise.resolve().then(a.bind(a,71163))},66648:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var n=a(55601),l=a.n(n)},55601:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return o},getImageProps:function(){return s}});let n=a(51609),l=a(80497),i=a(38173),r=n._(a(21241));function s(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let o=i.Image},60291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=a(51609)._(a(2265)).default.createContext(null)},95525:function(e,t,a){"use strict";a.d(t,{L:function(){return n},e:function(){return l}});let n=()=>{let e=new Date,t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][e.getDay()],a=e.getDate(),n=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()],l=e.getFullYear();return"".concat(t,", ").concat(a," ").concat(n," ").concat(l)},l=()=>{let e=new Date,t=e.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return{tanggal:t,jam:"".concat(a,":").concat(n,":").concat(l)}}},58266:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});let n=()=>{let e=new Date,t=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0");return"".concat(t," : ").concat(a," : ").concat(n)}},71163:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(57437),l=a(30998),i=a(2265),r=a(45040),s=a(95525),o=a(58266),c=a(66648),d=e=>{let{onClick:t}=e;return(0,n.jsx)("dialog",{id:"modal-onboarding",className:"modal",children:(0,n.jsx)("div",{className:"modal-box max-w-md",children:(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsx)(c.default,{src:"/modal-image.png",width:500,height:500,alt:"logo"}),(0,n.jsx)("span",{className:"font-bold text-2xl",children:"Selamat Datang"}),(0,n.jsx)("p",{className:"text-xl",children:"Anda telah memasuki Anjungan Pendaftaran Mandiri."}),(0,n.jsx)("div",{className:"self-end",children:(0,n.jsx)("button",{className:"btn btn-md btn-primary",onClick:t,children:"Selanjutnya"})})]})})})};let u=e=>(0,n.jsxs)("div",{className:"px-20 py-16 rounded-xl justify-center items-center bg-white flex flex-col gap-16",children:[(0,n.jsxs)("span",{className:"font-bold text-4xl text-primary",children:["Antrian ",e.title]}),(0,n.jsx)("span",{className:"font-bold text-8xl text-primary",children:e.nomor}),(0,n.jsxs)("span",{className:"text-primary text-2xl",children:["Silahkan Menuju ",(0,n.jsx)("span",{className:"font-bold",children:e.desc})]})]}),g=(0,r.ZP)("".concat("http://localhost:8000"));var m=()=>{let{data:e}=(0,l.useSession)(),[t,a]=(0,i.useState)("A-0000"),[r,c]=(0,i.useState)("P-0000"),[m,f]=(0,i.useState)(""),[p,x]=(0,i.useState)(""),[S,h]=(0,i.useState)(""),[b,j]=(0,i.useState)((0,o.z)()),[A,y]=(0,i.useState)(!0),v=new Date().toLocaleDateString(),N=new Date().toLocaleDateString();return(0,i.useEffect)(()=>{let e=document.getElementById("modal-onboarding");return null==e||e.showModal(),()=>null==e?void 0:e.close()},[]),(0,i.useEffect)(()=>{let e=setInterval(()=>{j((0,o.z)())},1e3);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{let e=localStorage.getItem("panggilAntrianAdmisi");return localStorage.getItem("lastDateAdmisi")!==v?(localStorage.setItem("lastDateAdmisi",v),localStorage.setItem("panggilAntrianAdmisi","A-0000"),a("A-0000")):e&&a(e),g.on("panggilAntrianAdmisi",e=>{a(e.antrian),f(e.message),localStorage.setItem("panggilAntrianAdmisi",e.antrian)}),()=>{g.off("panggilAntrianAdmisi")}},[v]),(0,i.useEffect)(()=>{let e=localStorage.getItem("lastDatePasien"),t=localStorage.getItem("panggilAntrianPasien");return e!==N?(localStorage.setItem("lastDatePasien",N),localStorage.setItem("panggilAntrianPasien","P-0000"),c("P-0000")):t&&c(t),g.on("panggilAntrianPasien",e=>{c(e.antrian),x(e.message),h(e.poli),localStorage.setItem("panggilAntrianPasien",e.antrian)}),()=>{g.off("panggilAntrianPasien")}},[N]),(0,i.useEffect)(()=>{m&&(new Audio("/audio/admisi/".concat(m,".mp3")).play().catch(e=>{console.error("Error playing audio:",e)}),f(""))},[m]),(0,i.useEffect)(()=>{if(p){let e=new Audio("/audio/pasien/".concat(p,".mp3")),t=S?new Audio(S):null;t&&(t.preload="auto"),e.play().catch(e=>{console.error("Error playing audio:",e)}),e.onended=()=>{t&&t.play().catch(e=>{console.error("Error playing audio poli:",e)})},x(""),h("")}},[p,S]),(0,n.jsxs)(n.Fragment,{children:[A&&(0,n.jsx)(d,{onClick:()=>{y(!1)}}),(0,n.jsxs)("div",{className:"h-screen flex flex-col gap-12 2xl:gap-28 items-center justify-center",style:{backgroundImage:"url('/background-APM.png')",backgroundSize:"cover"},children:[(0,n.jsx)("div",{className:"text-white",children:(0,n.jsx)("h1",{className:"font-bold text-5xl",children:"Klinik ".concat(null==e?void 0:e.user.nameFasyankes)})}),(0,n.jsxs)("div",{className:"flex gap-8",children:[(0,n.jsx)(u,{title:"Pasien",nomor:r,desc:"Poli"}),(0,n.jsx)(u,{title:"Admisi",nomor:t,desc:"Administrasi"})]}),(0,n.jsxs)("div",{className:"flex flex-col text-center gap-2",children:[(0,n.jsx)("span",{className:"font-bold text-5xl text-white",children:(0,s.L)()}),(0,n.jsx)("span",{className:"font-bold text-4xl text-white opacity-80",children:b})]})]})]})}}},function(e){e.O(0,[998,8173,5040,2971,7023,1744],function(){return e(e.s=43845)}),_N_E=e.O()}]);