(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5664],{42480:function(){},64103:function(e,t,n){Promise.resolve().then(n.bind(n,41404))},57818:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(50551),r=n.n(a)},66648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(55601),r=n.n(a)},87138:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(231),r=n.n(a)},16463:function(e,t,n){"use strict";var a=n(71169);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},58064:function(e,t,n){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let a=n(74590);function r(e){let{createServerReference:t}=n(6671);return t(e,a.callServer)}},50551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=n(51609);n(57437),n(2265);let r=a._(n(40148));function l(e,t){var n;let a={loading:e=>{let{error:t,isLoading:n,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,r.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return o},getImageProps:function(){return s}});let a=n(51609),r=n(80497),l=n(38173),i=a._(n(21241));function s(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let o=l.Image},10912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=n(55592);function r(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return n}},40148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let a=n(57437),r=n(2265),l=n(10912),i=n(61481);function s(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},n=(0,r.lazy)(()=>t.loader().then(s)),u=t.loading;function d(e){let s=u?(0,a.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(r.Suspense,{fallback:s,children:o})}return d.displayName="LoadableComponent",d}},61481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=n(57437),r=n(58512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,r.getExpectedRequestStore)("next/dynamic css"),l=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},61788:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});let a=e=>{let t=e.trim().split(" ");return 1===t.length?{firstName:t[0],lastName:t[0]}:{firstName:t[0],lastName:t.slice(1).join(" ")}}},75162:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var a=n(64379),r=n.n(a);function l(e){let{icon:t,title:n}=e;r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=r().stopTimer,e.onmouseleave=r().resumeTimer}}).fire({icon:t,title:n})}},73193:function(e,t,n){"use strict";n.d(t,{V:function(){return r},b:function(){return a}});let a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0,minimumFractionDigits:0}).format(Number(e)),r=e=>{let t=Number(e.replace(/[^0-9]/g,""));return isNaN(t)?"":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}},41317:function(e,t,n){"use strict";n.d(t,{P:function(){return a},n:function(){return r}});let a=async e=>{let{url:t}=e;try{let e=await fetch("".concat("http://localhost:8001/api","/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"".concat("IDsM4RtcaR32024*@>")}});if(!e.ok)return console.error("Error: ".concat(e.status," - ").concat(e.statusText)),null;return await e.json()}catch(e){return console.error("Failed to fetch data:",e),null}},r=async e=>{let{url:t,data:n}=e;try{let e=await fetch("".concat("http://localhost:8001/api","/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"".concat("IDsM4RtcaR32024*@>")},method:"POST",body:JSON.stringify(n)});return await e.json()}catch(e){return null}}},41404:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(57437),r=n(2265),l=n(41317),i=n(30998),s=n(75162);n(74590);var o=n(58064),u=(0,o.$)("0ea77e3981c4e4d56d727c089baed4b65d225843"),d=n(87138),c=(0,o.$)("4a85e0059880b29bda1328903e2cf70fc7b9c4be"),m=n(5100),f=n(57818),h=n(71968);let b=(0,f.default)(()=>Promise.resolve().then(n.bind(n,5100)).then(e=>e.PDFViewer),{loadableGenerated:{webpack:()=>[null]},ssr:!1,loading:()=>(0,a.jsx)("p",{children:"Loading..."})}),x=m.StyleSheet.create({page:{padding:30},header:{flexDirection:"row",justifyContent:"space-between",marginBottom:20},companyInfo:{width:"40%"},customerInfo:{textAlign:"right",width:"60%"},logo:{width:100,height:100},title:{fontSize:24,marginBottom:10,textAlign:"center"},item:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ddd",marginBottom:5,paddingBottom:5},itemName:{width:"70%"},diskonItem:{width:"40%",textAlign:"center"},qty:{width:"30%",textAlign:"center"},itemPrice:{textAlign:"right",width:"60%"},total:{fontSize:18,marginTop:20,textAlign:"right"}});var p=e=>{let{data:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)("dialog",{id:"modal-pos-print",className:"modal",children:(0,a.jsxs)("div",{className:"modal-box w-8/12 max-w-2xl",children:[(0,a.jsx)("form",{method:"dialog",children:(0,a.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,a.jsx)(b,{className:"w-full h-80",children:(0,a.jsx)(m.Document,{children:(0,a.jsxs)(m.Page,{style:x.page,children:[(0,a.jsx)(m.View,{style:x.header,children:(0,a.jsxs)(m.View,{style:x.companyInfo,children:[(0,a.jsxs)(m.Text,{children:["Billing No: ",null==t?void 0:t.groupTransaksiId]}),(0,a.jsxs)(m.Text,{children:["Date:"," ",(null==t?void 0:t.groupTransaksiId)&&(0,h.WU)(new Date(null==t?void 0:t.createdAt),"dd/MM/yyyy")]}),(0,a.jsx)(m.Text,{children:null==t?void 0:t.namaPelanggan}),(0,a.jsx)(m.Text,{children:null==t?void 0:t.hpPelanggan})]})}),(0,a.jsx)(m.Text,{style:x.title,children:"Billing Obat"}),(0,a.jsxs)(m.View,{style:x.item,children:[(0,a.jsx)(m.Text,{style:x.itemName,children:"Item"}),(0,a.jsx)(m.Text,{style:x.diskonItem,children:"Diskon Item"}),(0,a.jsx)(m.Text,{style:x.qty,children:"Qty"}),(0,a.jsx)(m.Text,{style:x.itemPrice,children:"Sub Total"})]}),null==t?void 0:t.transaksiPosDetail.map(e=>(0,a.jsxs)(m.View,{style:x.item,children:[(0,a.jsxs)(m.Text,{style:x.itemName,children:[e.namaBarang," ",e.hargaJual]}),(0,a.jsxs)(m.Text,{style:x.diskonItem,children:[e.diskonFromBo," "]}),(0,a.jsxs)(m.Text,{style:x.qty,children:["@",e.qty," "]}),(0,a.jsx)(m.Text,{style:x.itemPrice,children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.hargaSetelahDiskon)*Number(e.qty))})]},e.id)),(0,a.jsxs)(m.Text,{style:x.total,children:["Sub Total:"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(null==t?void 0:t.subTotal))]}),(0,a.jsxs)(m.Text,{style:x.total,children:["Pajak:"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(null==t?void 0:t.pajak))]}),(0,a.jsxs)(m.Text,{style:x.total,children:["Diskon:"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(null==t?void 0:t.diskonInvoice))]}),(0,a.jsxs)(m.Text,{style:x.total,children:["Biaya Lain:"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(null==t?void 0:t.biayaLainnya))]}),(0,a.jsxs)(m.Text,{style:x.total,children:["Total:"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(null==t?void 0:t.total))]})]})})})]})})})},g=n(73193),y=n(66648),v=n(16463),j=n(22208),N=n(61788),w=()=>{let{data:e}=(0,i.useSession)(),[t,n]=(0,r.useState)([]),[o,m]=(0,r.useState)([]),[f,h]=(0,r.useState)(0),[b,x]=(0,r.useState)(0),[w,k]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[I,P]=(0,r.useState)(""),[T,D]=(0,r.useState)(0),[B,C]=(0,r.useState)(0),[R,O]=(0,r.useState)(0),[A,F]=(0,r.useState)(""),[E,M]=(0,r.useState)(""),[L,q]=(0,r.useState)(""),[V,Z]=(0,r.useState)(""),[z,H]=(0,r.useState)(""),[$,Q]=(0,r.useState)(""),[U,W]=(0,r.useState)(""),[Y,G]=(0,r.useState)(U),[J,K]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(),[et,en]=(0,r.useState)(null),ea={0:"QRIS",1:"Virtual Account",2:"Debit",3:"Cash"},er=(0,r.useRef)(null),[el,ei]=(0,r.useState)(!1),[es,eo]=(0,r.useState)(""),eu=(0,v.useRouter)(),ed=async t=>{var a;let r=null==e?void 0:e.user.wfid;if(!r)return;let i=await (0,l.P)({url:"master-barang?wfid=".concat(r,"&search=").concat(t)});n(null==i?void 0:null===(a=i.data)||void 0===a?void 0:a.data)};(0,r.useEffect)(()=>{var t;(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.wfid)&&ed(U)},[null==e?void 0:e.user,Y,U]),(0,r.useEffect)(()=>{let t=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.success)===!0&&ei(!0)};return window.addEventListener("message",t),(async()=>{if(!el)return;let t=document.getElementById("modal-payment");null==t||t.close();try{var n,a,r;if((await u(o,{namaPelanggan:V,emailPelanggan:E,groupTransaksiId:es,hpPelanggan:L,diskonInvoice:B.toString(),pajak:R.toString(),biayaLainnya:null!=w?w:"0",kategoriBayar:ea[null!=et?et:3],subTotal:f.toString(),total:b.toString(),totalBayar:A},null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.idFasyankes,null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.package)).status){let t={barang:o.map(e=>({barang_id:e.barang_id,nama_obat:e.nama_barang,qty:e.qty})),wfid:null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.wfid},n=await (0,l.n)({url:"decrease-stock",data:t});if(!n.status){(0,s.o)({icon:"error",title:n.message});return}await ed(U),(0,s.o)({icon:"success",title:"Berhasil"}),m([]),em([]),k(""),M(""),q(""),Z(""),eo(""),en(null),ei(!1),eu.refresh();let a=await c(es);ee(a.data),setTimeout(()=>{var e;let t=null===(e=document)||void 0===e?void 0:e.getElementById("modal-pos-print");null==t||t.show()},2e3)}}catch(e){console.error(e),(0,s.o)({icon:"error",title:"An error occurred"})}})(),()=>{window.removeEventListener("message",t)}},[el]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{G(U)},500);return()=>{clearTimeout(e)}},[U]);let ec=e=>{if(o.find(t=>t.barang_id===e.barang_id)){let t=o.map(t=>{if(t.barang_id===e.barang_id){var n,a,r;let l=0;if(null===(n=e.diskon)||void 0===n?void 0:n.percent_disc){let t=Number(e.barang.harga_jual)*(Number(e.diskon.percent_disc)/100);l=Number(e.barang.harga_jual)-t}else l=Number(e.barang.harga_jual)-Number(null===(a=e.diskon)||void 0===a?void 0:a.amount_disc)?Number(e.barang.harga_jual)-Number(null===(r=e.diskon)||void 0===r?void 0:r.amount_disc):Number(e.barang.harga_jual);return{...t,qty:t.qty+1,totalHarga:Number(t.qty+1)*l}}return t});m(t),em(t)}else{var t,n,a,r,l;let i=0;if(null===(t=e.diskon)||void 0===t?void 0:t.percent_disc){let t=Number(e.barang.harga_jual)*(Number(e.diskon.percent_disc)/100);i=Number(e.barang.harga_jual)-t}else i=Number(e.barang.harga_jual)-Number(null===(r=e.diskon)||void 0===r?void 0:r.amount_disc)?Number(e.barang.harga_jual)-Number(null===(l=e.diskon)||void 0===l?void 0:l.amount_disc):Number(e.barang.harga_jual);let s={barang_id:e.barang_id,nama_barang:e.barang.nama_barang,harga_jual:e.barang.harga_jual,qty:1,totalHarga:i,diskonFromBo:(null===(n=e.diskon)||void 0===n?void 0:n.amount_disc)?e.diskon.amount_disc:(null===(a=e.diskon)||void 0===a?void 0:a.percent_disc)?Number(e.barang.harga_jual)*(Number(e.diskon.percent_disc)/100):0},u=[...o,s];m([...o,s]),em(u)}},em=e=>{let t=e.reduce((e,t)=>e+t.totalHarga,0);h(t),x(t)},ef=e=>{let t=e.replace(/[^0-9]/g,"");t?(k(t),ep(Number(_),Number(t),Number(I))):(k(""),ep(Number(_),0,Number(I)))},eh=e=>{/^\d*$/.test(e)?(S(e),ep(Number(e),Number(w),Number(I))):(S(""),ep(0,Number(w),Number(I)))},eb=e=>{let t=e.replace(/[^\d]/g,"");"rp"===z?(P((0,g.V)(t)),ep(Number(_),Number(w),Number(t))):"percent"===z&&t.length<=2&&(P(t),ep(Number(_),Number(w),Number(t)))},ex=e=>{H(e),P(""),er.current&&(er.current.value=""),ep(Number(_),Number(w),0)},ep=(e,t,n)=>{let a=0,r=f,l=e/100*r;O(l),r=f+l,"percent"===z?C(a=n/100*r):(a=n,C(n)),x(r-a+Number(t))},eg=async()=>{var e,t;if(null==et){(0,s.o)({icon:"error",title:"Silahkan pilih metode pembayaran!"});return}for(let e of[{value:V,message:"Silahkan isi nama pelanggan!"},{value:L,message:"Silahkan isi no hp pelanggan!"},{value:E,message:"Silahkan isi email!"}])if(!e.value){(0,s.o)({icon:"error",title:e.message});return}if(!/^0\d{10,16}$/.test(L)){(0,s.o)({icon:"error",title:"Nomor HP tidak valid!"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E)){(0,s.o)({icon:"error",title:"Email tidak valid!"});return}if(2===et||3===et){let t=null===(e=document)||void 0===e?void 0:e.getElementById("modal-pos");null==t||t.showModal()}else if(0===et||1===et){let{firstName:e,lastName:n}=(0,N.c)(V);try{let a=new Date().valueOf().toString(),r={orderId:a,email:E,firstName:e,lastName:n,mobilePhone:L.replace(/^0/,"+62"),amount:b,description:"Bayar Obat"},l=await fetch("/api/payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){(0,s.o)({icon:"error",title:"Payment failed"});return}let i=await l.json();Q(i.response.redirecturl);let o=null===(t=document)||void 0===t?void 0:t.getElementById("modal-payment");null==o||o.showModal(),eo(a)}catch(e){console.error(e),(0,s.o)({icon:"error",title:"An error occurred"})}}F(""),D(0)},ey=async t=>{t.preventDefault();let n=new Date().valueOf().toString(),a={barang:null==o?void 0:o.map(e=>({barang_id:e.barang_id,nama_obat:e.nama_barang,qty:e.qty})),wfid:null==e?void 0:e.user.wfid};if(Number(A)<b){(0,s.o)({icon:"error",title:"Pembayaran tidak boleh kurang"});return}let r=await u(o,{namaPelanggan:V,emailPelanggan:E,groupTransaksiId:n,hpPelanggan:L,diskonInvoice:B.toString(),pajak:R.toString(),biayaLainnya:null!=w?w:"0",kategoriBayar:ea[null!=et?et:3],subTotal:f.toString(),total:b.toString(),totalBayar:A},null==e?void 0:e.user.idFasyankes,null==e?void 0:e.user.package);if(r.status){var i;let e=await (0,l.n)({url:"decrease-stock",data:a});if(!e.status){(0,s.o)({icon:"error",title:e.message});return}(0,s.o)({icon:"success",title:r.message}),eu.refresh(),(null===(i=document)||void 0===i?void 0:i.getElementById("modal-pos")).close(),m([]),em([]),k(""),M(""),q(""),Z(""),en(null),await ed(U),ee((await c(n)).data),setTimeout(()=>{var e;let t=null===(e=document)||void 0===e?void 0:e.getElementById("modal-pos-print");null==t||t.show()},2e3)}else(0,s.o)({icon:"error",title:r.message})},ev=e=>{let t=o.filter(t=>t.barang_id!==e);em(t),m(t)};return(0,a.jsxs)("div",{className:"flex gap-2 flex-col p-2",children:[(0,a.jsx)(d.default,{href:"/klinik",children:(0,a.jsxs)("button",{className:"btn btn-sm btn-primary",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z",clipRule:"evenodd"})}),"Kembali"]})}),(0,a.jsxs)("div",{role:"alert",className:"alert alert-info",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"h-6 w-6 shrink-0 stroke-current",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:"POS Penjualan Obat"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"w-2/3 h-full flex flex-col min-h-screen p-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Cari obat",className:"input input-primary w-full join-item",value:U,onChange:e=>{W(e.target.value)}}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Produk"}),(0,a.jsx)("th",{children:"Harga"}),(0,a.jsx)("td",{children:"Diskon"}),(0,a.jsx)("th",{})]})}),(0,a.jsx)("tbody",{children:null==t?void 0:t.map(e=>{var t,n,r;let l=o.find(t=>t.barang_id===e.barang_id),i=!!l&&l.qty>=e.stok;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold",children:(null==e?void 0:null===(t=e.barang)||void 0===t?void 0:t.nama_barang)||"Unknown Name"}),(0,a.jsxs)("div",{className:"text-sm opacity-50",children:["Stok: ",null!==(r=null==e?void 0:e.stok)&&void 0!==r?r:"N/A"]})]})})}),(0,a.jsx)("td",{children:(null==e?void 0:null===(n=e.barang)||void 0===n?void 0:n.harga_jual)?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.barang.harga_jual)):"Unknown Price"}),(0,a.jsx)("td",{children:(null==e?void 0:e.diskon)?"Percentage"===e.diskon.type?"".concat(e.diskon.percent_disc,"%"):new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.diskon.amount_disc)):"No Discount"}),(0,a.jsx)("th",{children:(0,a.jsx)("button",{onClick:()=>ec(e),className:"btn btn-primary",disabled:i||(null==e?void 0:e.stok)===0,children:"Tambah"})})]},null==e?void 0:e.barang_id)})})]})})]}),(0,a.jsx)("div",{className:"w-1/3",children:(0,a.jsxs)("div",{className:"flex flex-col bg-base-200 min-h-screen p-2 gap-2",children:[(0,a.jsx)("p",{className:"text-xl font-medium",children:"Biodata Pasien"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Nama"}),(0,a.jsx)("input",{type:"text",value:V,onChange:e=>Z(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"No HP"}),(0,a.jsx)("input",{type:"number",value:L,onChange:e=>q(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Email"}),(0,a.jsx)("input",{type:"email",value:E,onChange:e=>M(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Produk"}),(0,a.jsx)("th",{children:"QTY"}),(0,a.jsx)("th",{children:"Total"}),(0,a.jsx)("th",{})]})}),(0,a.jsx)("tbody",{children:null==o?void 0:o.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-bold",children:e.nama_barang})})}),(0,a.jsx)("td",{children:e.qty}),(0,a.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.totalHarga))}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{className:"btn btn-circle btn-error",onClick:()=>ev(e.barang_id),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z",clipRule:"evenodd"})})})})]},e.barang_id))})]}),(0,a.jsx)("div",{className:"divider"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-xl font-medium",children:"Rincian Pembayaran"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Sub Total"}),(0,a.jsx)("input",{type:"text",value:(0,g.b)(f),readOnly:!0,className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Pajak %"}),(0,a.jsx)("input",{type:"text",maxLength:2,value:_,onChange:e=>eh(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Diskon"}),(0,a.jsx)("p",{children:"%"}),(0,a.jsx)("input",{type:"radio",className:"radio radio-primary",onChange:()=>ex("percent"),name:"diskon",value:"percent"}),(0,a.jsx)("p",{children:"Rp."}),(0,a.jsx)("input",{type:"radio",className:"radio radio-primary",onChange:()=>ex("rp"),name:"diskon",value:"rp"}),(0,a.jsx)("input",{ref:er,type:"text",value:"percent"===z?I:(0,g.V)(I),onFocus:()=>K(!0),onBlur:()=>K(!1),maxLength:"percent"===z?2:void 0,onChange:e=>eb(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium label-text",children:"Biaya Lainnya"}),(0,a.jsx)("input",{type:"text",value:(0,g.V)(w),onFocus:()=>K(!0),onBlur:()=>K(!1),onChange:e=>ef(e.target.value),className:"input input-bordered w-full max-w-xs"})]}),(0,a.jsx)("div",{className:"divider"}),(null==e?void 0:e.user.role)!=="admin"&&(null==e?void 0:e.user.role)!=="tester"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xl font-medium",children:"Metode Pembayaran"}),(0,a.jsx)("div",{className:"flex justify-center gap-2",children:[{name:"QRIS",icon:"/QR.png"},{name:"Virtual Account",icon:"/bank.png"},{name:"Debit Card",icon:"/debit.png"},{name:"Cash",icon:"/cash.png"}].map((e,t)=>{let n=et===t;return(0,a.jsxs)("div",{onClick:()=>en(t),className:"flex flex-col items-center justify-center w-40 h-32\n                      } border-2 rounded-lg transition-all duration-300 px-2 ".concat(n?"bg-primary border-primary text-white":"bg-gray-100 border-primary text-black"," hover:shadow-lg hover:scale-105 cursor-pointer"),children:[(0,a.jsx)(y.default,{src:e.icon,alt:e.name,width:100,height:80,className:"".concat("QRIS"===e.name?"w-16 h-8":"w-[48px] h-10"," mb-3 ").concat(n?"filter invert":"")}),(0,a.jsx)("span",{className:"text-sm text-center ".concat(n?"text-white":"text-black"),children:e.name})]},t)})}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsxs)("button",{onClick:()=>eg(),disabled:0===b,className:"btn btn-info btn-block",children:["BAYAR"," ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(b))]})})]})]})]})})]}),(0,a.jsx)("dialog",{id:"modal-pos",className:"modal",children:(0,a.jsxs)("div",{className:"modal-box w-4/12 max-w-2xl",children:[(0,a.jsx)("form",{method:"dialog",children:(0,a.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,a.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:ey,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"w-1/3",children:"Total"}),(0,a.jsx)("input",{type:"text",readOnly:!0,value:(0,g.b)(b),className:"input input-primary"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"w-1/3",children:"Bayar"}),(0,a.jsx)("input",{type:"text",required:!0,value:(0,g.V)(A),name:"bayar",onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");F(t),D(Number(t)-b)},autoFocus:!0,className:"input input-primary"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{className:"w-1/3",children:"Kembali"}),(0,a.jsx)("input",{type:"text",value:(0,g.b)(T),readOnly:!0,className:"input input-primary"})]}),(null==e?void 0:e.user.role)!=="admin"&&(null==e?void 0:e.user.role)!=="tester"&&(0,a.jsx)("button",{type:"submit",className:"btn btn-info",children:"BAYAR"})]})]})}),(0,a.jsx)(p,{data:X}),(0,a.jsx)(j.Z,{src:$})]})}},22208:function(e,t,n){"use strict";var a=n(57437),r=n(2265),l=n(64379),i=n.n(l);t.Z=e=>{let{src:t}=e,[n,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{document.getElementById("modal-payment");let e=e=>{"Escape"===e.key&&e.preventDefault()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,a.jsx)("dialog",{id:"modal-payment",className:"modal z-0",children:(0,a.jsxs)("div",{className:"modal-box p-10",children:[(0,a.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:()=>{n||(l(!0),i().fire({title:"Batalkan Pembayaran?",target:document.getElementById("modal-payment"),icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Tidak",confirmButtonText:"Ya"}).then(e=>{if(e.isConfirmed){let e=document.getElementById("modal-payment");null==e||e.close()}l(!1)}))},children:"✕"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("iframe",{src:t,style:{height:"600px"},width:"100%"})})]})})}},48362:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,{Z:function(){return a}})},22988:function(e,t,n){"use strict";function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}n.d(t,{Z:function(){return a}})},23950:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(t.includes(a))continue;n[a]=e[a]}return n}n.d(t,{Z:function(){return a}})},8620:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return a}})},85352:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(48362);function r(e,t){if(e){if("string"==typeof e)return(0,a.Z)(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(e,t):void 0}}}},function(e){e.O(0,[9461,249,7448,7282,231,1968,998,5457,8173,2971,7023,1744],function(){return e(e.s=64103)}),_N_E=e.O()}]);