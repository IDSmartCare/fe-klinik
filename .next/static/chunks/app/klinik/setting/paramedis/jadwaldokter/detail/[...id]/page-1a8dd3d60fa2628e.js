(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2632],{36635:function(e,t,a){Promise.resolve().then(a.bind(a,92022)),Promise.resolve().then(a.bind(a,72350)),Promise.resolve().then(a.bind(a,45149)),Promise.resolve().then(a.bind(a,45834))},87138:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var l=a(231),n=a.n(l)},92682:function(e,t,a){"use strict";a.d(t,{ZP:function(){return o}});var l=a(17792),n=a(22988),s=a(2265),i=a(43139);a(31818),a(54887),a(92658);var o=(0,s.forwardRef)(function(e,t){var a=(0,l.u)(e);return s.createElement(i.S,(0,n.Z)({ref:t},a))})},76789:function(e,t,a){"use strict";a.d(t,{v:function(){return s}});var l=a(57437),n=a(54887);function s(){let{pending:e}=(0,n.useFormStatus)();return(0,l.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},92022:function(e,t,a){"use strict";var l=a(57437),n=a(33514),s=a(54175),i=a(13541),o=a(2265);let r=(e,t,a,l)=>{let n=(0,i.O4)(e.getValue(t),a);return l({itemRank:n}),n.passed};function d(e){let{value:t,onChange:a,debounce:n=500,...s}=e,[i,r]=(0,o.useState)(t);return(0,o.useEffect)(()=>{r(t)},[t]),(0,o.useEffect)(()=>{let e=setTimeout(()=>{a(i)},n);return()=>clearTimeout(e)},[i,n,a]),(0,l.jsx)("input",{...s,value:i,onChange:e=>r(e.target.value)})}t.default=function(e){let{rowsData:t,columnsData:a}=e,[i,c]=(0,o.useState)(""),u=(0,o.useMemo)(()=>a,[a]),m=(0,n.b7)({data:t||[],columns:u,state:{globalFilter:i},onGlobalFilterChange:c,globalFilterFn:r,getCoreRowModel:(0,s.sC)(),getFilteredRowModel:(0,s.vL)(),getSortedRowModel:(0,s.tj)(),getPaginationRowModel:(0,s.G_)(),getFacetedRowModel:(0,s.o6)(),getFacetedUniqueValues:(0,s.JG)()});return(0,l.jsxs)("div",{className:"overflow-x-auto gap-2 flex flex-col h-full py-2",children:[(0,l.jsx)(d,{value:null!=i?i:"",className:"input input-info input-sm max-w-xs self-end",onChange:e=>c(String(e)),placeholder:"Cari dari total ".concat(m.getPrePaginationRowModel().rows.length," data")}),(0,l.jsxs)("table",{className:"table table-sm text-center table-pin-cols",children:[(0,l.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,l.jsx)("th",{className:"bg-base-200",colSpan:e.colSpan,children:e.isPlaceholder?null:(0,l.jsxs)("button",{className:e.column.getCanSort()?"cursor-pointer select-none":"",onClick:e.column.getToggleSortingHandler(),onKeyDown:e.column.getToggleSortingHandler(),children:[(0,n.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:" \uD83D\uDD3C",desc:" \uD83D\uDD3D"})[e.column.getIsSorted()])&&void 0!==t?t:null]})},e.id)})},e.id))}),(0,l.jsx)("tbody",{children:m.getRowModel().rows.map(e=>(0,l.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"join",children:[(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.setPageIndex(0),disabled:!m.getCanPreviousPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",children:"Page ".concat(m.getState().pagination.pageIndex+1," of ").concat(m.getPageCount())}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.setPageIndex(m.getPageCount()-1),disabled:!m.getCanNextPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"})})})]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)("p",{children:" Go to page :"}),(0,l.jsx)("input",{type:"number",defaultValue:m.getState().pagination.pageIndex+1,onChange:e=>{let t=e.target.value?Number(e.target.value)-1:0;m.setPageIndex(t)},className:"input-xs w-14"})]}),(0,l.jsx)("select",{className:"select select-info select-xs",value:m.getState().pagination.pageSize,onChange:e=>{m.setPageSize(Number(e.target.value))},children:[10,20,30,40,50].map(e=>(0,l.jsxs)("option",{value:e,children:["Show ",e]},e))})]})]})}},75162:function(e,t,a){"use strict";a.d(t,{o:function(){return s}});var l=a(64379),n=a.n(l);function s(e){let{icon:t,title:a}=e;n().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=n().stopTimer,e.onmouseleave=n().resumeTimer}}).fire({icon:t,title:a})}},72350:function(e,t,a){"use strict";var l=a(57437),n=a(54175),s=a(75162),i=a(64379),o=a.n(i);let r=async e=>{o().fire({title:"Apakah anda yakin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Tidak",confirmButtonText:"Ya, Hapus!"}).then(async t=>{if(t.isConfirmed)try{let t=await fetch("/api/dokter/jadwaldokter/hapusjadwal",{method:"DELETE",body:JSON.stringify({id:e}),headers:{"Content-Type":"application/json"}}),a=await t.json();a?((0,s.o)({icon:"success",title:"Berhasil"}),setTimeout(()=>{window.location.reload()},2e3)):(0,s.o)({icon:"error",title:a})}catch(e){(0,s.o)({icon:"error",title:e.message})}})},d=(0,n.Cl)(),c=[d.accessor(e=>e.day,{cell:e=>e.getValue(),header:"Hari"}),d.accessor(e=>e.times,{cell:e=>{let t=e.getValue();return t.length>0?t.map(e=>(0,l.jsx)("div",{children:"".concat(e.from," - ").concat(e.to)},"".concat(e.from,"-").concat(e.to))):"-"},header:"Jam Praktek"}),d.accessor(e=>e.slot,{cell:e=>e.getValue()?"".concat(e.getValue()," Menit"):"-",header:"Sesi perhari"}),d.accessor(e=>e.id,{cell:e=>(0,l.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,l.jsx)("div",{className:"tooltip","data-tip":"Ubah Jadwal",children:(0,l.jsx)("button",{className:"btn btn-outline btn-success btn-circle btn-xs",onClick:()=>{let t=document.getElementById("edit-jadwal");t.setAttribute("data-id",e.getValue()),t.showModal()},children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:[(0,l.jsx)("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),(0,l.jsx)("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})]})})}),(0,l.jsx)("div",{className:"tooltip","data-tip":"Hapus Jadwal",children:(0,l.jsx)("button",{className:"btn btn-circle btn-outline btn-error btn-xs",onClick:()=>r(e.getValue()),children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"size-4",children:(0,l.jsx)("path",{d:"M18 6L17.1991 18.0129C17.129 19.065 17.0939 19.5911 16.8667 19.99C16.6666 20.3412 16.3648 20.6235 16.0011 20.7998C15.588 21 15.0607 21 14.0062 21H9.99377C8.93927 21 8.41202 21 7.99889 20.7998C7.63517 20.6235 7.33339 20.3412 7.13332 19.99C6.90607 19.5911 6.871 19.065 6.80086 18.0129L6 6M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6",stroke:"#e82121",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})]}),header:"Aksi"})];t.default=c},45149:function(e,t,a){"use strict";var l=a(57437),n=a(87138),s=a(2265),i=a(39343),o=a(75162),r=a(16463),d=a(92682),c=a(76789);t.default=e=>{var t,a,u;let{session:m,dataJadwal:h}=e,{handleSubmit:x,formState:{errors:p},reset:g,control:b}=(0,i.cI)(),j=(0,r.useRouter)(),[v,f]=(0,s.useState)([{id:1,jamDari:"",jamSampai:""}]),[w,C]=(0,s.useState)(2),k=e=>{v.length>1&&f(t=>t.filter(t=>t.id!==e))},N=(e,t,a)=>{f(l=>l.map(l=>l.id===e?{...l,[t]:a}:l))},S=async e=>{var t,a;let l={dokter_id:h.id,slot:Number(null===(t=e.slot)||void 0===t?void 0:t.value),days:e.hari.map(e=>e.value),times:v.map(e=>({from:e.jamDari,to:e.jamSampai}))};try{let e=await fetch("/api/dokter/jadwaldokter/postjadwal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!e.ok){let t=await e.json();(0,o.o)({icon:"error",title:t.message});return}(0,o.o)({icon:"success",title:"Berhasil!"}),g(),(null===(a=document)||void 0===a?void 0:a.getElementById("add-jadwal")).close(),f([{id:1,jamDari:"",jamSampai:""}]),C(2),j.refresh()}catch(e){console.log(e),(0,o.o)({icon:"error",title:e.message})}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-[-50px] z-[999] flex gap-3",children:[(0,l.jsx)(n.default,{href:"/klinik/setting/paramedis/jadwaldokter",className:" w-max",children:(0,l.jsxs)("button",{className:"btn btn-sm btn-primary text-white",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M12.5 9.75A2.75 2.75 0 0 0 9.75 7H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 1.06L4.56 5.5h5.19a4.25 4.25 0 0 1 0 8.5h-1a.75.75 0 0 1 0-1.5h1a2.75 2.75 0 0 0 2.75-2.75Z",clipRule:"evenodd"})}),"Kembali"]})}),(0,l.jsxs)("button",{className:"btn btn-success btn-sm text-white",onClick:()=>{document.getElementById("add-jadwal").showModal()},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z",clipRule:"evenodd"})}),"Tambah Jadwal"]})]}),(0,l.jsx)("dialog",{id:"add-jadwal",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box w-4/12 max-w-lg",children:[(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Tambah Jadwal Dokter"}),(0,l.jsxs)("form",{onSubmit:x(S),className:"flex flex-col gap-2 mt-5",children:[(0,l.jsx)(i.Qr,{name:"hari",control:b,rules:{required:"Tidak boleh kosong!"},render:e=>{let{field:t}=e;return(0,l.jsx)(d.ZP,{...t,isMulti:!0,isClearable:!0,placeholder:"Pilih Hari",options:[{label:"Senin",value:"Senin"},{label:"Selasa",value:"Selasa"},{label:"Rabu",value:"Rabu"},{label:"Kamis",value:"Kamis"},{label:"Jumat",value:"Jumat"},{label:"Sabtu",value:"Sabtu"},{label:"Minggu",value:"Minggu"}]})}}),(0,l.jsx)("span",{className:"label-text-alt opacity-50 mt-[-5px]",children:"Anda dapat memilih lebih dari satu hari sesuai kebutuhan"}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:p.hari&&(0,l.jsx)("span",{children:null===(t=p.hari.message)||void 0===t?void 0:t.toString()})}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(i.Qr,{name:"slot",control:b,rules:{required:"Tidak boleh kosong!"},render:e=>{let{field:t}=e;return(0,l.jsx)(d.ZP,{...t,isClearable:!0,placeholder:"Pilih Sesi",options:[{label:"60 Menit",value:60},{label:"90 Menit",value:90}]})}})}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:p.slot&&(0,l.jsx)("span",{children:null===(u=p.slot)||void 0===u?void 0:null===(a=u.message)||void 0===a?void 0:a.toString()})}),v.map(e=>(0,l.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,l.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamDari,onChange:t=>N(e.id,"jamDari",t.target.value)}),(0,l.jsx)("span",{className:"label-text-alt",children:"s/d"}),(0,l.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamSampai,onChange:t=>N(e.id,"jamSampai",t.target.value)}),v.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>k(e.id),className:"btn btn-sm btn-error text-white",children:(0,l.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:[(0,l.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,l.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,l.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,l.jsx)("path",{d:"M5 6.77273H9.2M19 6.77273H14.8M9.2 6.77273V5.5C9.2 4.94772 9.64772 4.5 10.2 4.5H13.8C14.3523 4.5 14.8 4.94772 14.8 5.5V6.77273M9.2 6.77273H14.8M6.4 8.59091V15.8636C6.4 17.5778 6.4 18.4349 6.94673 18.9675C7.49347 19.5 8.37342 19.5 10.1333 19.5H13.8667C15.6266 19.5 16.5065 19.5 17.0533 18.9675C17.6 18.4349 17.6 17.5778 17.6 15.8636V8.59091M9.2 10.4091V15.8636M12 10.4091V15.8636M14.8 10.4091V15.8636",stroke:"#ffffff","stroke-linecap":"round","stroke-linejoin":"round"})," "]})]})})]},e.id)),(0,l.jsx)("button",{type:"button",onClick:()=>{f(e=>[...e,{id:w,jamDari:"",jamSampai:""}]),C(e=>e+1)},className:"btn btn-sm btn-success text-white",children:"Tambah Waktu"}),(null==m?void 0:m.user.role)!=="tester"&&(0,l.jsx)(c.v,{})]})]})})]})}},45834:function(e,t,a){"use strict";var l=a(57437),n=a(2265),s=a(39343),i=a(75162),o=a(16463),r=a(92682),d=a(76789);t.default=e=>{var t,a;let{session:c,dataJadwal:u,availableDay:m}=e,{handleSubmit:h,formState:{errors:x},reset:p,control:g,setValue:b}=(0,s.cI)(),j=(0,o.useRouter)(),[v,f]=(0,n.useState)([]),[w,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=document.getElementById("edit-jadwal");if(!e)return;let t=new MutationObserver(()=>{C(e.getAttribute("data-id"))});return t.observe(e,{attributes:!0}),()=>t.disconnect()},[]);let k=m.find(e=>e.id.toString()===w),[N,S]=(0,n.useState)(1);(0,n.useEffect)(()=>{w&&m&&k&&(f(k.times.map((e,t)=>({id:t+1,jamDari:e.from,jamSampai:e.to}))),b("slot",{value:k.slot,label:"".concat(k.slot," Menit")}),b("hari",k.day.split(",").map(e=>({value:e,label:e}))))},[w,m,b,k]);let y=(e,t,a)=>{f(l=>l.map(l=>l.id===e?{...l,[t]:a}:l))},M=e=>{v.length>1&&f(t=>t.filter(t=>t.id!==e))},P=async e=>{var t,a;let l={availableDayId:w,data:{dokter_id:u.id,slot:Number(null===(t=e.slot)||void 0===t?void 0:t.value),days:k,times:v.map(e=>({from:e.jamDari,to:e.jamSampai}))}};try{let e=await fetch("/api/dokter/jadwaldokter/editjadwal",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!e.ok){let t=await e.json();(0,i.o)({icon:"error",title:t.message});return}(0,i.o)({icon:"success",title:"Berhasil!"}),p(),(null===(a=document)||void 0===a?void 0:a.getElementById("edit-jadwal")).close(),f([{id:1,jamDari:"",jamSampai:""}]),S(2),j.refresh()}catch(e){console.log(e),(0,i.o)({icon:"error",title:e.message})}};return(0,l.jsx)("dialog",{id:"edit-jadwal",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box w-4/12 max-w-lg",children:[(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,l.jsxs)("h3",{className:"font-bold text-lg",children:["Edit Jadwal Dokter (Hari ",null==k?void 0:k.day,")"]}),(0,l.jsxs)("form",{onSubmit:h(P),className:"flex flex-col gap-2 mt-5",children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)(s.Qr,{name:"slot",control:g,rules:{required:"Tidak boleh kosong!"},render:e=>{let{field:t}=e;return(0,l.jsx)(r.ZP,{...t,isClearable:!0,placeholder:"Pilih Sesi",options:[{label:"60 Menit",value:60},{label:"90 Menit",value:90}]})}})}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:x.slot&&(0,l.jsx)("span",{children:null===(a=x.slot)||void 0===a?void 0:null===(t=a.message)||void 0===t?void 0:t.toString()})}),v.map(e=>(0,l.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,l.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamDari,onChange:t=>y(e.id,"jamDari",t.target.value)}),(0,l.jsx)("span",{className:"label-text-alt",children:"s/d"}),(0,l.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamSampai,onChange:t=>y(e.id,"jamSampai",t.target.value)}),v.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>M(e.id),className:"btn btn-sm btn-error text-white",children:"Hapus"})]},e.id)),(0,l.jsx)("button",{type:"button",onClick:()=>{f(e=>[...e,{id:Date.now(),jamDari:"",jamSampai:""}])},className:"btn btn-sm btn-success text-white",children:"Tambah Waktu"}),(null==c?void 0:c.user.role)!=="tester"&&(0,l.jsx)(d.v,{})]})]})})}}},function(e){e.O(0,[9461,231,9343,7363,5151,2971,7023,1744],function(){return e(e.s=36635)}),_N_E=e.O()}]);