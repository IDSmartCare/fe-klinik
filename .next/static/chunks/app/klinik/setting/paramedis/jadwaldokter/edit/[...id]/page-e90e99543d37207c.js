(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5399],{87039:function(e,t,a){Promise.resolve().then(a.bind(a,46457))},92682:function(e,t,a){"use strict";a.d(t,{ZP:function(){return n}});var r=a(17792),i=a(22988),s=a(2265),l=a(43139);a(31818),a(54887),a(92658);var n=(0,s.forwardRef)(function(e,t){var a=(0,r.u)(e);return s.createElement(l.S,(0,i.Z)({ref:t},a))})},75162:function(e,t,a){"use strict";a.d(t,{o:function(){return s}});var r=a(64379),i=a.n(r);function s(e){let{icon:t,title:a}=e;i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=i().stopTimer,e.onmouseleave=i().resumeTimer}}).fire({icon:t,title:a})}},65987:function(e,t,a){"use strict";var r=a(57437);t.Z=e=>{let{message:t}=e;return(0,r.jsxs)("div",{role:"alert",className:"alert rounded",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:t})]})}},46457:function(e,t,a){"use strict";var r=a(57437),i=a(2265),s=a(39343),l=a(92682),n=a(65987),o=a(75162),u=a(16463);t.default=e=>{var t,a,d;let{data:m,session:c}=e,{register:p,handleSubmit:h,formState:{errors:b},reset:x,control:v}=(0,s.cI)(),f=(0,u.useRouter)(),[j,g]=(0,i.useState)([{id:1,jamDari:"",jamSampai:""}]),[w,k]=(0,i.useState)(2),[S,N]=(0,i.useState)([]);(0,i.useEffect)(()=>{N(m.availableDays.map(e=>({label:e.day,value:e.day.toLowerCase()})))},[m]);let C=e=>{j.length>1&&g(t=>t.filter(t=>t.id!==e))},y=(e,t,a)=>{g(r=>r.map(r=>r.id===e?{...r,[t]:a}:r))},M=async e=>{var t;let a={dokter_id:Number(e.dokterId.value),slot:Number(null===(t=e.slot)||void 0===t?void 0:t.value),days:e.hari.map(e=>e.value),times:j.map(e=>({from:e.jamDari,to:e.jamSampai}))};try{let e=await fetch("/api/jadwal/edit",{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.text();(0,o.o)({icon:"error",title:t});return}let t=await e.json();(0,o.o)({icon:"success",title:t.message}),f.back(),f.refresh()}catch(e){console.log(e),(0,o.o)({icon:"error",title:e instanceof Error?e.message:"An unexpected error occurred."})}};return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(n.Z,{message:"Edit Jadwal Dokter"}),(0,r.jsxs)("form",{onSubmit:h(M),className:"flex flex-col gap-2 mt-10 w-full md:w-4/12 border-gray-300 border-2 rounded-lg p-5  md:p-8",children:[(0,r.jsx)(s.Qr,{name:"hari",control:v,rules:{required:"Tidak boleh kosong!"},render:e=>{let{field:t}=e;return(0,r.jsx)(l.ZP,{...t,isMulti:!0,isClearable:!0,placeholder:"Pilih Hari",options:[{label:"Senin",value:"mon"},{label:"Selasa",value:"tue"},{label:"Rabu",value:"wed"},{label:"Kamis",value:"thu"},{label:"Jumat",value:"fri"},{label:"Sabtu",value:"sat"},{label:"Minggu",value:"sun"}]})}}),(0,r.jsx)("span",{className:"label-text-alt opacity-50 mt-[-5px]",children:"Anda dapat memilih lebih dari satu hari sesuai kebutuhan"}),(0,r.jsx)("span",{className:"label-text-alt text-error",children:b.hari&&(0,r.jsx)("span",{children:null===(t=b.hari.message)||void 0===t?void 0:t.toString()})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(s.Qr,{name:"slot",control:v,rules:{required:"Tidak boleh kosong!"},render:e=>{let{field:t}=e;return(0,r.jsx)(l.ZP,{...t,isClearable:!0,placeholder:"Pilih Sesi",options:[{label:"60 Menit",value:60},{label:"90 Menit",value:90}]})}})}),(0,r.jsx)("span",{className:"label-text-alt text-error",children:b.slot&&(0,r.jsx)("span",{children:null===(d=b.slot)||void 0===d?void 0:null===(a=d.message)||void 0===a?void 0:a.toString()})}),j.map(e=>(0,r.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,r.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamDari,onChange:t=>y(e.id,"jamDari",t.target.value)}),(0,r.jsx)("span",{className:"label-text-alt",children:"s/d"}),(0,r.jsx)("input",{type:"time",className:"input input-sm input-bordered input-primary w-full max-w-xs",value:e.jamSampai,onChange:t=>y(e.id,"jamSampai",t.target.value)}),j.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>C(e.id),className:"btn btn-sm btn-error text-white",children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:[(0,r.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,r.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,r.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,r.jsx)("path",{d:"M5 6.77273H9.2M19 6.77273H14.8M9.2 6.77273V5.5C9.2 4.94772 9.64772 4.5 10.2 4.5H13.8C14.3523 4.5 14.8 4.94772 14.8 5.5V6.77273M9.2 6.77273H14.8M6.4 8.59091V15.8636C6.4 17.5778 6.4 18.4349 6.94673 18.9675C7.49347 19.5 8.37342 19.5 10.1333 19.5H13.8667C15.6266 19.5 16.5065 19.5 17.0533 18.9675C17.6 18.4349 17.6 17.5778 17.6 15.8636V8.59091M9.2 10.4091V15.8636M12 10.4091V15.8636M14.8 10.4091V15.8636",stroke:"#ffffff","stroke-linecap":"round","stroke-linejoin":"round"})," "]})]})})]},e.id)),(0,r.jsx)("button",{type:"button",onClick:()=>{g(e=>[...e,{id:w,jamDari:"",jamSampai:""}]),k(e=>e+1)},className:"btn btn-sm btn-success text-white",children:"Tambah Waktu"}),(null==c?void 0:c.user.role)!="tester"&&(0,r.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Submit"})]})]})}}},function(e){e.O(0,[9461,9343,5151,2971,7023,1744],function(){return e(e.s=87039)}),_N_E=e.O()}]);