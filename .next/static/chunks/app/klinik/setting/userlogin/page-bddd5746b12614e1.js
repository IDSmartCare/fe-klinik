(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3488],{3915:function(e,a,l){Promise.resolve().then(l.bind(l,2022)),Promise.resolve().then(l.bind(l,6140)),Promise.resolve().then(l.bind(l,6536))},6463:function(e,a,l){"use strict";var s=l(1169);l.o(s,"useRouter")&&l.d(a,{useRouter:function(){return s.useRouter}})},8064:function(e,a,l){"use strict";Object.defineProperty(a,"$",{enumerable:!0,get:function(){return t}});let s=l(4590);function t(e){let{createServerReference:a}=l(6671);return a(e,s.callServer)}},2682:function(e,a,l){"use strict";l.d(a,{ZP:function(){return i}});var s=l(7792),t=l(2988),n=l(2265),r=l(3139);l(1818),l(4887),l(2658);var i=(0,n.forwardRef)(function(e,a){var l=(0,s.u)(e);return n.createElement(r.S,(0,t.Z)({ref:a},l))})},9453:function(e,a,l){"use strict";l.d(a,{q:function(){return t}});var s,t,n=l(7437);(s=t||(t={})).add="add",s.info="info",a.Z=e=>{let{modalname:a,title:l,icon:s}=e,t=()=>{document.getElementById(a).showModal()};return(0,n.jsx)("div",{children:(0,n.jsxs)("button",{onClick:()=>t(),className:"btn btn-xs btn-primary",children:["add"===s?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z",clipRule:"evenodd"})}):(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:[(0,n.jsx)("path",{d:"M4.038 4.038a5.25 5.25 0 0 0 0 7.424.75.75 0 0 1-1.06 1.061A6.75 6.75 0 1 1 14.5 7.75a.75.75 0 1 1-1.5 0 5.25 5.25 0 0 0-8.962-3.712Z"}),(0,n.jsx)("path",{d:"M7.712 7.136a.75.75 0 0 1 .814.302l2.984 4.377a.75.75 0 0 1-.726 1.164l-.76-.109.289 1.075a.75.75 0 0 1-1.45.388l-.287-1.075-.602.474a.75.75 0 0 1-1.212-.645l.396-5.283a.75.75 0 0 1 .554-.668Z"}),(0,n.jsx)("path",{d:"M5.805 9.695A2.75 2.75 0 1 1 10.5 7.75a.75.75 0 0 0 1.5 0 4.25 4.25 0 1 0-7.255 3.005.75.75 0 1 0 1.06-1.06Z"})]}),l]})})}},2022:function(e,a,l){"use strict";var s=l(7437),t=l(3514),n=l(4175),r=l(3541),i=l(2265);let o=(e,a,l,s)=>{let t=(0,r.O4)(e.getValue(a),l);return s({itemRank:t}),t.passed};function c(e){let{value:a,onChange:l,debounce:t=500,...n}=e,[r,o]=(0,i.useState)(a);return(0,i.useEffect)(()=>{o(a)},[a]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{l(r)},t);return()=>clearTimeout(e)},[r,t,l]),(0,s.jsx)("input",{...n,value:r,onChange:e=>o(e.target.value)})}a.default=function(e){let{rowsData:a,columnsData:l}=e,[r,d]=(0,i.useState)(""),u=(0,i.useMemo)(()=>l,[l]),m=(0,t.b7)({data:a||[],columns:u,state:{globalFilter:r},onGlobalFilterChange:d,globalFilterFn:o,getCoreRowModel:(0,n.sC)(),getFilteredRowModel:(0,n.vL)(),getSortedRowModel:(0,n.tj)(),getPaginationRowModel:(0,n.G_)(),getFacetedRowModel:(0,n.o6)(),getFacetedUniqueValues:(0,n.JG)()});return(0,s.jsxs)("div",{className:"overflow-x-auto gap-2 flex flex-col h-full py-2",children:[(0,s.jsx)(c,{value:null!=r?r:"",className:"input input-info input-sm max-w-xs self-end",onChange:e=>d(String(e)),placeholder:"Cari dari total ".concat(m.getPrePaginationRowModel().rows.length," data")}),(0,s.jsxs)("table",{className:"table table-sm text-center table-pin-cols",children:[(0,s.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map(e=>{var a;return(0,s.jsx)("th",{className:"bg-base-200",colSpan:e.colSpan,children:e.isPlaceholder?null:(0,s.jsxs)("button",{className:e.column.getCanSort()?"cursor-pointer select-none":"",onClick:e.column.getToggleSortingHandler(),onKeyDown:e.column.getToggleSortingHandler(),children:[(0,t.ie)(e.column.columnDef.header,e.getContext()),null!==(a=({asc:" \uD83D\uDD3C",desc:" \uD83D\uDD3D"})[e.column.getIsSorted()])&&void 0!==a?a:null]})},e.id)})},e.id))}),(0,s.jsx)("tbody",{children:m.getRowModel().rows.map(e=>(0,s.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,s.jsx)("td",{children:(0,t.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"join",children:[(0,s.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.setPageIndex(0),disabled:!m.getCanPreviousPage(),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})}),(0,s.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),(0,s.jsx)("button",{className:"join-item btn btn-xs btn-info",children:"Page ".concat(m.getState().pagination.pageIndex+1," of ").concat(m.getPageCount())}),(0,s.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),(0,s.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>m.setPageIndex(m.getPageCount()-1),disabled:!m.getCanNextPage(),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"})})})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("p",{children:" Go to page :"}),(0,s.jsx)("input",{type:"number",defaultValue:m.getState().pagination.pageIndex+1,onChange:e=>{let a=e.target.value?Number(e.target.value)-1:0;m.setPageIndex(a)},className:"input-xs w-14"})]}),(0,s.jsx)("select",{className:"select select-info select-xs",value:m.getState().pagination.pageSize,onChange:e=>{m.setPageSize(Number(e.target.value))},children:[10,20,30,40,50].map(e=>(0,s.jsxs)("option",{value:e,children:["Show ",e]},e))})]})]})}},5162:function(e,a,l){"use strict";l.d(a,{o:function(){return n}});var s=l(4379),t=l.n(s);function n(e){let{icon:a,title:l}=e;t().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=t().stopTimer,e.onmouseleave=t().resumeTimer}}).fire({icon:a,title:l})}},6536:function(e,a,l){"use strict";let s=(0,l(4175).Cl)(),t=[s.accessor(e=>e.id_profile,{cell:e=>e.getValue(),header:"ID"}),s.accessor(e=>e.username,{cell:e=>e.getValue(),header:"Username"}),s.accessor(e=>e.role,{cell:e=>e.getValue(),header:"Role"}),s.accessor(e=>{var a;return null==e?void 0:null===(a=e.detail)||void 0===a?void 0:a.namaLengkap},{cell:e=>e.getValue(),header:"Nama"}),s.accessor(e=>{var a,l;return null===(l=e.detail)||void 0===l?void 0:null===(a=l.poliklinik)||void 0===a?void 0:a.namaPoli},{cell:e=>e.getValue(),header:"Poliklinik"}),s.accessor(e=>{var a;return null===(a=e.detail)||void 0===a?void 0:a.str},{cell:e=>e.getValue(),header:"STR"}),s.accessor(e=>{var a;return null===(a=e.detail)||void 0===a?void 0:a.sip},{cell:e=>e.getValue(),header:"SIP"})];a.default=t},6140:function(e,a,l){"use strict";l.d(a,{default:function(){return x}});var s=l(7437),t=l(9453),n=l(2265),r=l(9343),i=l(2682);l(4590);var o=l(8064),c=(0,o.$)("8ef90cebf788b1b27efdf909ff799073217886df"),d=(0,o.$)("6f6780ab8affa6855328ffd3065653253c5c9a49"),u=(0,o.$)("dff75fe81ed5d1b5691dac5df87cb8469fb8bb99"),m=l(5162),p=l(1317),h=l(6463),x=e=>{var a;let{session:l}=e,{register:o,handleSubmit:x,formState:{errors:b},reset:f,control:g,setError:v}=(0,r.cI)(),j=(0,n.useId)(),k=(0,h.useRouter)(),[N,w]=(0,n.useState)(!1),[y,P]=(0,n.useState)([]),[C,S]=(0,n.useState)("");(0,n.useEffect)(()=>{!async function(){let e=await fetch("/api/paramedis/findallpoli?idFasyankes=".concat(null==l?void 0:l.user.idFasyankes));if(!e.ok){P([]);return}P([...(await e.json()).map(e=>({label:e.namaPoli,value:e.id}))])}()},[null==l?void 0:l.user.idFasyankes]);let T=async e=>{if((null==l?void 0:l.user.package)==="FREE"){let a=e.role.value;if(await c(a,null==l?void 0:l.user.idFasyankes)>=1)return(0,m.o)({icon:"error",title:"Paket FREE hanya mengizinkan 1 pengguna untuk role ".concat(e.role.label,".")})}else if((null==l?void 0:l.user.package)==="Plus"&&(null==l?void 0:l.user.type)==="Klinik"){let a=e.role.value;if(await c(a,null==l?void 0:l.user.idFasyankes)>=4)return(0,m.o)({icon:"error",title:"Paket PLUS hanya mengizinkan 4 pengguna untuk role ".concat(e.role.label,".")})}let a=await d(e,null==l?void 0:l.user.idFasyankes);if(a.status){var s,t,n,r;let i={username:e.username,password:e.password,password_confirmation:e.confirmPassword,created_by:e.createdBy,role:e.role.value,fasyankes_id:null==l?void 0:l.user.idFasyankes,id_profile:null===(s=a.data)||void 0===s?void 0:s.id},o=await (0,p.n)({url:"access-fasyankes/store",data:i});if(o.status){if("dokter"===e.role.value){let s={idFasyankes:null==l?void 0:l.user.idFasyankes,idProfile:null===(t=a.data)||void 0===t?void 0:t.id,name:e.namaLengkap,str:e.str,sip:e.sip,phone:e.phone,unit:C,idPoliKlinik:Number(null===(n=e.poliklinik)||void 0===n?void 0:n.value)||null};if(!(await fetch("/api/dokter/tambahdokter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok){(0,m.o)({icon:"error",title:"Gagal Menambahkan User"});return}}(0,m.o)({icon:"success",title:o.message}),f(),setTimeout(()=>k.refresh(),1e3)}else await u(null===(r=a.data)||void 0===r?void 0:r.id.toString()),(0,m.o)({icon:"error",title:"Gagal Menambahkan User"}),o.errors&&Object.keys(o.errors).forEach(e=>{v(e,{type:"api",message:o.errors[e]})})}else(0,m.o)({icon:"error",title:"Gagal Menambahkan User"})},R=e=>{e.target.value&&("dokter"===e.target.value.value?w(!0):w(!1))};return(0,s.jsxs)("div",{className:"self-end",children:[(0,s.jsx)(t.Z,{icon:t.q.add,modalname:"add-user",title:"User Baru"}),(0,s.jsx)("dialog",{id:"add-user",className:"modal",children:(0,s.jsxs)("div",{className:"modal-box w-8/12 max-w-3xl h-screen",children:[(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Tambah User Baru"}),(0,s.jsxs)("form",{onSubmit:x(T),className:"flex flex-col gap-2 mt-5",children:[(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Username"})}),(0,s.jsx)("input",{type:"text",...o("username",{required:"*Tidak boleh kosong"}),className:"input input-primary w-full input-sm"}),b.username&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.username.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Password"})}),(0,s.jsx)("input",{type:"password",...o("password",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.password&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.password.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Password Confirm"})}),(0,s.jsx)("input",{type:"password",...o("confirmPassword",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.confirmPassword&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.confirmPassword.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Role"})}),(0,s.jsx)(r.Qr,{name:"role",control:g,rules:{required:"*Tidak boleh kosong",onChange:e=>R(e)},render:e=>{let{field:a}=e;return(0,s.jsx)(i.ZP,{...a,instanceId:j,className:"w-full",isClearable:!0,options:(null==l?void 0:l.user.type)==="Apotek"?[{value:"kasir",label:"Kasir"}]:[{value:"admin",label:"Admin"},{value:"admisi",label:"Pendaftaran"},{value:"dokter",label:"Dokter"},{value:"perawat",label:"Perawat"},{value:"farmasi",label:"Farmasi"},{value:"kasir",label:"Kasir"}]})}}),b.role&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:null===(a=b.role.message)||void 0===a?void 0:a.toString()})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Created By"})}),(0,s.jsx)("input",{type:"text",...o("createdBy",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.createdBy&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.createdBy.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Nama Lengkap"})}),(0,s.jsx)("input",{type:"text",...o("namaLengkap",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.namaLengkap&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.namaLengkap.message})})]}),N&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Nomor Telepon"})}),(0,s.jsx)("input",{type:"number",...o("phone",{required:"*Tidak boleh kosong",minLength:{value:10,message:"Minimal 10 angka"},maxLength:{value:16,message:"Maksimal 16 angka"}}),className:"input input-sm input-primary w-full"}),b.phone&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.phone.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Pilih Poli Dokter"})}),(0,s.jsx)(r.Qr,{name:"poliklinik",control:g,rules:{required:"*Tidak boleh kosong"},render:e=>{let{field:a}=e;return(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)(i.ZP,{...a,isClearable:!0,placeholder:"Pilih poli dokter",instanceId:j,options:y,onChange:e=>{a.onChange(e),S((null==e?void 0:e.label)||"")}}),b.poliklinik&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.poliklinik.message})})]})}})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Kode Dokter"})}),(0,s.jsx)("input",{type:"text",...o("kodedokter",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.kodedokter&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.kodedokter.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"STR"})}),(0,s.jsx)("input",{type:"text",...o("str",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.str&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.str.message})})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("div",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"SIP"})}),(0,s.jsx)("input",{type:"text",...o("sip",{required:"*Tidak boleh kosong"}),className:"input input-sm input-primary w-full "}),b.sip&&(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text-alt text-error",children:b.sip.message})})]})]}),(null==l?void 0:l.user.role)!=="tester"&&(0,s.jsx)("button",{className:"btn btn-primary btn-block btn-sm mt-4",children:"Simpan"})]})]})})]})}},1317:function(e,a,l){"use strict";l.d(a,{P:function(){return s},n:function(){return t}});let s=async e=>{let{url:a}=e;try{let e=await fetch("".concat("http://localhost:8001/api","/").concat(a),{headers:{"Content-Type":"application/json",Authorization:"".concat("IDsM4RtcaR32024*@>")}});if(!e.ok)return console.error("Error: ".concat(e.status," - ").concat(e.statusText)),null;return await e.json()}catch(e){return console.error("Failed to fetch data:",e),null}},t=async e=>{let{url:a,data:l}=e;try{let e=await fetch("".concat("http://localhost:8001/api","/").concat(a),{headers:{"Content-Type":"application/json",Authorization:"".concat("IDsM4RtcaR32024*@>")},method:"POST",body:JSON.stringify(l)});return await e.json()}catch(e){return null}}}},function(e){e.O(0,[9461,7363,9343,5670,2971,7023,1744],function(){return e(e.s=3915)}),_N_E=e.O()}]);