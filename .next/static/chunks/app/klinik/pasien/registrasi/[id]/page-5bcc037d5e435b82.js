(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3492],{1111:function(e,a,n){Promise.resolve().then(n.bind(n,2926))},6463:function(e,a,n){"use strict";var t=n(1169);n.o(t,"useRouter")&&n.d(a,{useRouter:function(){return t.useRouter}})},2682:function(e,a,n){"use strict";n.d(a,{ZP:function(){return i}});var t=n(7792),l=n(2988),s=n(2265),r=n(3139);n(1818),n(4887),n(2658);var i=(0,s.forwardRef)(function(e,a){var n=(0,t.u)(e);return s.createElement(r.S,(0,l.Z)({ref:a},n))})},6789:function(e,a,n){"use strict";n.d(a,{v:function(){return s}});var t=n(7437),l=n(4887);function s(){let{pending:e}=(0,l.useFormStatus)();return(0,t.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},5162:function(e,a,n){"use strict";n.d(a,{o:function(){return s}});var t=n(4379),l=n.n(t);function s(e){let{icon:a,title:n}=e;l().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=l().stopTimer,e.onmouseleave=l().resumeTimer}}).fire({icon:a,title:n})}},2926:function(e,a,n){"use strict";var t=n(7437),l=n(2682),s=n(9343),r=n(2265),i=n(6789),o=n(5162),u=n(6463);a.default=e=>{var a,n;let{idpasien:c,session:d}=e,[m,v]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),{handleSubmit:j,formState:{errors:h},reset:b,control:k}=(0,s.cI)(),x=(0,r.useId)(),[g,N]=(0,r.useState)([]),S=(0,u.useRouter)();(0,r.useEffect)(()=>{(async()=>{let e=new Date().getDay(),a=await fetch("/api/paramedis/getjadwaldokter?hari=".concat(e,"&idFasyankes=").concat(null==d?void 0:d.user.idFasyankes));if(!a.ok){N([]);return}N([...(await a.json()).map(e=>{var a,n,t;return{value:e.id,label:"".concat(null===(a=e.dokter)||void 0===a?void 0:a.namaLengkap,"-").concat(null===(t=e.dokter)||void 0===t?void 0:null===(n=t.poliklinik)||void 0===n?void 0:n.kodePoli," (").concat(e.jamPraktek,")")}})])})()},[null==d?void 0:d.user.idFasyankes]);let w=async e=>{let a={pasienData:{pasienId:Number(c),jadwalDokterId:e.jadwalDokterId.value,penjamin:e.penjamin.value,namaAsuransi:p.length>0?p:null,idFasyankes:null==d?void 0:d.user.idFasyankes},userRole:null==d?void 0:d.user.role,userPackage:null==d?void 0:d.user.package};try{let e=await fetch("/api/pasien/addregistrasi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();a.message?(0,o.o)({icon:"error",title:a.message}):(0,o.o)({icon:"error",title:"Gagal simpan data!"});return}(0,o.o)({icon:"success",title:"Berhasil!"}),b(),S.refresh()}catch(e){console.log(e),(0,o.o)({icon:"error",title:"Gagal!"})}},I=e=>{e.target.value&&("ASURANSI"===e.target.value.value?v(!0):(v(!1),f("")))};return(0,t.jsxs)("form",{onSubmit:j(w),children:[(0,t.jsxs)("div",{className:"form-control w-full",children:[(0,t.jsx)("div",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Dokter Yang Tersedia Hari Ini"})}),(0,t.jsx)(s.Qr,{name:"jadwalDokterId",control:k,rules:{required:"*Silahkan pilih",onChange:e=>I(e)},render:e=>{let{field:a}=e;return(0,t.jsx)(l.ZP,{...a,isClearable:!0,instanceId:x,options:g})}}),h.jadwalDokterId&&(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text-alt text-error",children:null===(a=h.jadwalDokterId.message)||void 0===a?void 0:a.toString()})})]}),(0,t.jsxs)("div",{className:"form-control w-full",children:[(0,t.jsx)("div",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Penjamin"})}),(0,t.jsx)(s.Qr,{name:"penjamin",control:k,rules:{required:"*Silahkan pilih",onChange:e=>I(e)},render:e=>{let{field:a}=e;return(0,t.jsx)(l.ZP,{...a,isClearable:!0,instanceId:x,options:[{value:"BPJS",label:"BPJS"},{value:"PRIBADI",label:"PRIBADI"},{value:"ASURANSI",label:"ASURANSI"}]})}}),h.penjamin&&(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text-alt text-error",children:null===(n=h.penjamin.message)||void 0===n?void 0:n.toString()})}),m&&(0,t.jsxs)("div",{className:"form-control w-full",children:[(0,t.jsx)("div",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Nama Asuransi"})}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),className:"input input-primary w-full input-sm"})]})]}),(null==d?void 0:d.user.role)!=="tester"&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(i.v,{})})]})}}},function(e){e.O(0,[9461,9343,5670,2971,7023,1744],function(){return e(e.s=1111)}),_N_E=e.O()}]);