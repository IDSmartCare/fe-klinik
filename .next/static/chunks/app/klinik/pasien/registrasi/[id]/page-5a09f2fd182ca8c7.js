(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3492,4937],{42480:function(){},41650:function(e,t,a){Promise.resolve().then(a.bind(a,72926))},57818:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var n=a(50551),l=a.n(n)},50551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let n=a(51609);a(57437),a(2265);let l=n._(a(40148));function r(e,t){var a;let n={loading:e=>{let{error:t,isLoading:a,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let r={...n,...t};return(0,l.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let n=a(55592);function l(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return a}},40148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=a(57437),l=a(2265),r=a(10912),s=a(61481);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},a=(0,l.lazy)(()=>t.loader().then(i)),u=t.loading;function d(e){let i=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(a,{...e})]}):(0,n.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(a,{...e})});return(0,n.jsx)(l.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},61481:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let n=a(57437),l=a(58512);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,l.getExpectedRequestStore)("next/dynamic css"),r=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,n.jsx)(n.Fragment,{children:r.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},92682:function(e,t,a){"use strict";a.d(t,{ZP:function(){return i}});var n=a(17792),l=a(22988),r=a(2265),s=a(43139);a(31818),a(54887),a(92658);var i=(0,r.forwardRef)(function(e,t){var a=(0,n.u)(e);return r.createElement(s.S,(0,l.Z)({ref:t},a))})},27295:function(e,t,a){"use strict";a.r(t);var n=a(57437),l=a(5100),r=a(57818);a(2265);var s=a(30998);let i=(0,r.default)(()=>Promise.resolve().then(a.bind(a,5100)).then(e=>e.PDFViewer),{loadableGenerated:{webpack:()=>[null]},ssr:!1,loading:()=>(0,n.jsx)("p",{children:"Loading..."})}),o=l.StyleSheet.create({page:{padding:5,fontFamily:"Helvetica",fontSize:8,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},header:{fontSize:10,textAlign:"center"},nameFasyankes:{textAlign:"center"},separator:{width:"100%",textAlign:"center",marginVertical:5},ticketNumber:{fontSize:35,fontWeight:"bold",marginVertical:5},instruction:{textAlign:"center",marginTop:5,fontSize:9,marginRight:27,marginLeft:27,marginBottom:5},footer:{fontSize:8,textAlign:"center"},Date:{fontSize:8,textAlign:"center"}});t.default=e=>{let{nomorAntrian:t,poli:a,tanggalDaftar:r,jamDaftar:u}=e,{data:d}=(0,s.useSession)();return(0,n.jsx)("div",{children:(0,n.jsx)("dialog",{id:"modal-antrian-pasien",className:"modal",children:(0,n.jsxs)("div",{className:"modal-box relative",children:[(0,n.jsx)("form",{method:"dialog",children:(0,n.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"âœ•"})}),(0,n.jsx)("h3",{className:"text-lg font-bold",children:"Tiket Antrian"}),(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(i,{style:{width:"100%",height:"400px"},children:(0,n.jsx)(l.Document,{children:(0,n.jsxs)(l.Page,{size:[226.77,170.08],style:o.page,children:[(0,n.jsx)(l.Text,{style:o.header,children:"Nomor Antrian Pasien "}),(0,n.jsx)(l.Text,{style:o.nameFasyankes,children:null==d?void 0:d.user.nameFasyankes}),(0,n.jsx)(l.Text,{style:o.separator,children:"===================================="}),(0,n.jsx)(l.Text,{style:o.ticketNumber,children:t}),(0,n.jsx)(l.Text,{style:o.separator,children:"===================================="}),(0,n.jsxs)(l.Text,{style:o.instruction,children:["Silahkan menuju ",a]}),(0,n.jsx)(l.Text,{style:o.Date,children:r}),(0,n.jsx)(l.Text,{style:o.footer,children:u})]})})})}),(0,n.jsx)("div",{className:"modal-action"})]})})})}},76789:function(e,t,a){"use strict";a.d(t,{v:function(){return r}});var n=a(57437),l=a(54887);function r(){let{pending:e}=(0,l.useFormStatus)();return(0,n.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},95525:function(e,t,a){"use strict";a.d(t,{L:function(){return n},e:function(){return l}});let n=()=>{let e=new Date,t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][e.getDay()],a=e.getDate(),n=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e.getMonth()],l=e.getFullYear();return"".concat(t,", ").concat(a," ").concat(n," ").concat(l)},l=()=>{let e=new Date,t=e.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return{tanggal:t,jam:"".concat(a,":").concat(n,":").concat(l)}}},75162:function(e,t,a){"use strict";a.d(t,{o:function(){return r}});var n=a(64379),l=a.n(n);function r(e){let{icon:t,title:a}=e;l().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=l().stopTimer,e.onmouseleave=l().resumeTimer}}).fire({icon:t,title:a})}},72926:function(e,t,a){"use strict";var n=a(57437),l=a(92682),r=a(39343),s=a(2265),i=a(76789),o=a(75162),u=a(16463),d=a(27295),c=a(95525);t.default=e=>{var t,a,m,f;let{idpasien:h,session:x}=e,[g,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),{handleSubmit:v,formState:{errors:y},reset:S,control:k,register:N}=(0,r.cI)(),A=(0,s.useId)(),[w,P]=(0,s.useState)([]),[I,D]=(0,s.useState)([]),T=(0,u.useRouter)(),_=new Date().getDay(),[C,F]=(0,s.useState)(""),[R,M]=(0,s.useState)(null),[O,B]=(0,s.useState)(""),[E,z]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{var e;let t=new Date().getDay(),a=await fetch("".concat("http://localhost:8000","/dokter/jadwaldokter/").concat(t,"/").concat(null==x?void 0:x.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!a.ok){D([]);return}let n=await a.json();if(!n.success||!n.data){D([]);return}D(null===(e=n.data)||void 0===e?void 0:e.flatMap(e=>e.days.flatMap(t=>t.times.map(a=>({value:e.id,label:"".concat(e.name," - ").concat(e.unit," (").concat(a.from," - ").concat(a.to,")"),idHari:t.id,idJamPraktek:a.id})))))})()},[null==x?void 0:x.user.idFasyankes]),(0,s.useEffect)(()=>{(async()=>{let e=await fetch("".concat("http://localhost:8000","/masterasuransi/").concat(null==x?void 0:x.user.idFasyankes),{method:"GET",headers:{Authorization:"Bearer ".concat("testing")}});if(!e.ok){P([]);return}let t=await e.json();if(!t.success||!t.data){P([]);return}P(t.data.map(e=>({value:e.kodeAsuransi,label:e.namaAsuransi})))})()},[null==x?void 0:x.user.idFasyankes]);let J=async e=>{var t,a,n,l;let r={pasienData:{pasienId:Number(h),doctorId:Number(e.dokterId.value),penjamin:(null===(t=e.penjamin)||void 0===t?void 0:t.value)==="ASURANSI"?"ASURANSI ".concat(null===(a=e.namaAsuransi)||void 0===a?void 0:a.label):null===(n=e.penjamin)||void 0===n?void 0:n.value,namaAsuransi:null===(l=e.namaAsuransi)||void 0===l?void 0:l.label,nomorAsuransi:e.nomorAsuransi,idFasyankes:null==x?void 0:x.user.idFasyankes,availableDayId:e.dokterId.idHari,availableTimeId:e.dokterId.idJamPraktek,hari:_},userRole:null==x?void 0:x.user.role,userPackage:null==x?void 0:x.user.package};try{let e=await fetch("/api/pasien/addregistrasi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){let t=await e.json();t.message?(0,o.o)({icon:"error",title:t.message}):(0,o.o)({icon:"error",title:"Gagal simpan data!"});return}let t=await e.json();M(t.nomorAntrian),B((0,c.e)().tanggal),F((0,c.e)().jam),z(t.registrasi.doctor.unit),S(),T.refresh(),(0,o.o)({icon:"success",title:"Berhasil!"}),setTimeout(()=>{let e=document.getElementById("modal-antrian-pasien");null==e||e.showModal()},2e3)}catch(e){console.log(e),(0,o.o)({icon:"error",title:"Gagal!"})}},L=e=>{e.target.value&&("ASURANSI"===e.target.value.value?p(!0):(p(!1),j("")))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{nomorAntrian:R,jamDaftar:C,poli:E,tanggalDaftar:O}),(0,n.jsxs)("form",{onSubmit:v(J),children:[(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Dokter Yang Tersedia Hari Ini"})}),(0,n.jsx)(r.Qr,{name:"dokterId",control:k,rules:{required:"*Silahkan pilih"},render:e=>{let{field:t}=e;return(0,n.jsx)(l.ZP,{...t,isClearable:!0,instanceId:A,options:I,onChange:e=>{t.onChange(e)}})}}),y.dokterId&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(t=y.dokterId.message)||void 0===t?void 0:t.toString()})})]}),(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Penjamin"})}),(0,n.jsx)(r.Qr,{name:"penjamin",control:k,rules:{required:"*Silahkan pilih",onChange:e=>L(e)},render:e=>{let{field:t}=e;return(0,n.jsx)(l.ZP,{...t,isClearable:!0,instanceId:A,options:[{value:"BPJS",label:"BPJS"},{value:"PRIBADI",label:"PRIBADI"},{value:"ASURANSI",label:"ASURANSI"}]})}}),y.penjamin&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(a=y.penjamin.message)||void 0===a?void 0:a.toString()})}),g&&(0,n.jsxs)("div",{className:"mt-1",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Asuransi"})}),(0,n.jsx)(r.Qr,{name:"namaAsuransi",control:k,rules:{required:"*Silahkan pilih"},render:e=>{let{field:t}=e;return(0,n.jsx)(l.ZP,{...t,isClearable:!0,instanceId:A,options:w})}}),y.namaAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(m=y.namaAsuransi.message)||void 0===m?void 0:m.toString()})}),(0,n.jsxs)("div",{className:"form-control w-full",children:[(0,n.jsx)("div",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Nomor Asuransi"})}),(0,n.jsx)("input",{...N("nomorAsuransi",{required:"*Tidak boleh kosong"}),type:"number",value:b,onChange:e=>j(e.target.value),className:"input input-primary w-full input-sm"})]}),y.nomorAsuransi&&(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-error",children:null===(f=y.nomorAsuransi.message)||void 0===f?void 0:f.toString()})})]})]}),(null==x?void 0:x.user.role)!=="tester"&&(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(i.v,{})})]})]})}}},function(e){e.O(0,[9461,249,7448,7282,9343,5151,998,5457,2971,7023,1744],function(){return e(e.s=41650)}),_N_E=e.O()}]);