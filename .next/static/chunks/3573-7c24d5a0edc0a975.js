"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3573],{87138:function(e,n,t){t.d(n,{default:function(){return s.a}});var l=t(231),s=t.n(l)},92910:function(e,n,t){t.d(n,{default:function(){return v}});var l=t(57437),s=t(2265),a=t(39343),i=t(75162),r=t(30998),o=t(65987),d=t(74546),c=t(66237);function u(e,n){let t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function h(e,n){let t=(0,d.Q)(e),l=(0,d.Q)(n),s=t.getTime()-l.getTime();return s<0?-1:s>0?1:s}let x=e=>{if(!e)return{years:"",months:"",days:""};let n=new Date,t=function(e,n){let t=(0,d.Q)(e),l=(0,d.Q)(n);return t.getFullYear()-l.getFullYear()}(n,e),l=new Date(n.getFullYear(),e.getMonth(),e.getDate());l>n&&l.setFullYear(l.getFullYear()-1);let s=function(e,n){let t=(0,d.Q)(e),l=(0,d.Q)(n),s=u(t,l),a=Math.abs((0,c.w)(t,l));t.setDate(t.getDate()-s*a);let i=Number(u(t,l)===-s),r=s*(a-i);return 0===r?0:r}(n,l);return{years:t,months:function(e,n){let t;let l=(0,d.Q)(e),s=(0,d.Q)(n),a=h(l,s),i=Math.abs(function(e,n){let t=(0,d.Q)(e),l=(0,d.Q)(n);return 12*(t.getFullYear()-l.getFullYear())+(t.getMonth()-l.getMonth())}(l,s));if(i<1)t=0;else{1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-a*i);let n=h(l,s)===-a;(function(e){let n=(0,d.Q)(e);return+function(e){let n=(0,d.Q)(e);return n.setHours(23,59,59,999),n}(n)==+function(e){let n=(0,d.Q)(e),t=n.getMonth();return n.setFullYear(n.getFullYear(),t+1,0),n.setHours(23,59,59,999),n}(n)})((0,d.Q)(e))&&1===i&&1===h(e,s)&&(n=!1),t=a*(i-Number(n))}return 0===t?0:t}(n,l),days:s}};var m=t(71968),g=e=>{let{pasien:n}=e,{years:t,months:s,days:a}=x(new Date(null==n?void 0:n.tanggalLahir));return(0,l.jsx)("div",{className:"card text-info-content border",children:(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("table",{className:"table table-zebra table-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsxs)("th",{colSpan:2,className:"text-2xl",children:[null==n?void 0:n.namaPasien," (",null==n?void 0:n.jenisKelamin,") / ",null==n?void 0:n.noRm," "]})})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"TEMPAT TANGGAL LAHIR"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.tempatLahir,","," ",(null==n?void 0:n.tanggalLahir)&&(0,m.WU)(null==n?void 0:n.tanggalLahir,"dd/MM/yyyy")," "]}),(0,l.jsx)("th",{children:"UMUR"}),(0,l.jsxs)("td",{children:[": ","".concat(t," Tahun ").concat(s," Bulan ").concat(a," Hari")]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"NIK"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.nik]}),(0,l.jsx)("th",{children:"NO. BPJS"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.bpjs]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"WARGANEGARA"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.wargaNegara]}),(0,l.jsx)("th",{children:"PASPOR"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.paspor]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"STATUS PERNIKAHAN"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.statusMenikah.replace("_"," ")]}),(0,l.jsx)("th",{children:"AGAMA"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.agama]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"PEKERJAAN"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.pekerjaan.replace("_"," ")]}),(0,l.jsx)("th",{children:"KOTA"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.kota]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"KELURAHAN"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.kelurahan]}),(0,l.jsx)("th",{children:"KECAMATAN"}),(0,l.jsxs)("td",{children:[": ",null==n?void 0:n.kecamatan]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"ALAMAT"}),(0,l.jsxs)("td",{colSpan:3,children:[": ",null==n?void 0:n.alamat]})]})]})]})})})},j=t(87138),p=e=>{let{session:n,params:t}=e;return(0,l.jsx)(l.Fragment,{children:(null==n?void 0:n.user.role)==="admin"||(null==n?void 0:n.user.role)==="admisi"?(0,l.jsxs)("ul",{className:"menu menu-xs menu-horizontal space-x-2 bg-base-300 rounded self-end",children:[(0,l.jsx)("li",{children:(0,l.jsxs)(j.default,{href:"/klinik/pasien/registrasi/".concat(t.id),className:"btn btn-xs",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M11.013 2.513a1.75 1.75 0 0 1 2.475 2.474L6.226 12.25a2.751 2.751 0 0 1-.892.596l-2.047.848a.75.75 0 0 1-.98-.98l.848-2.047a2.75 2.75 0 0 1 .596-.892l7.262-7.261Z",clipRule:"evenodd"})}),"Pendaftaran"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(j.default,{href:"/klinik/pendaftaran/riwayat/".concat(t.id),className:"btn btn-xs",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:[(0,l.jsx)("path",{d:"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z"}),(0,l.jsx)("path",{fillRule:"evenodd",d:"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM8.75 7.75a.75.75 0 0 0-1.5 0v2.69L6.03 9.22a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l2.5-2.5a.75.75 0 1 0-1.06-1.06l-1.22 1.22V7.75Z",clipRule:"evenodd"})]}),"Riwayat Pendaftaran"]})})]}):(0,l.jsx)("ul",{className:"menu menu-xs menu-horizontal space-x-2 bg-base-300 rounded self-end",children:(0,l.jsx)("li",{children:(0,l.jsxs)(j.default,{href:"/klinik/pendaftaran/riwayat/".concat(t.id),className:"btn btn-xs",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"size-4",children:[(0,l.jsx)("path",{d:"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z"}),(0,l.jsx)("path",{fillRule:"evenodd",d:"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM8.75 7.75a.75.75 0 0 0-1.5 0v2.69L6.03 9.22a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l2.5-2.5a.75.75 0 1 0-1.06-1.06l-1.22 1.22V7.75Z",clipRule:"evenodd"})]}),"Riwayat Pendaftaran"]})})})})},v=()=>{var e;let{register:n,handleSubmit:t,formState:{errors:d}}=(0,a.cI)(),[c,u]=(0,s.useState)(!1),{data:h}=(0,r.useSession)(),[m,j]=(0,s.useState)(),[v,b]=(0,s.useState)(),f=t(async e=>{u(!0);try{let n=await fetch("/api/pasien/findby",{method:"POST",body:JSON.stringify({findBy:e.type,idFasyankes:null==h?void 0:h.user.idFasyankes,value:e.input}),headers:{"Content-Type":"application/json"}}),t=await n.json();t&&0!==t.length?t.length>0?(b([...t]),document.getElementById("modal-pasien-list").showModal()):(j(t),document.getElementById("modal-pasien-satuan").showModal()):(0,i.o)({icon:"error",title:"Data tidak ditemukan!"})}catch(e){(0,i.o)({icon:"error",title:e.message}),console.log(e.message)}u(!1)});return(0,l.jsxs)("div",{children:[(0,l.jsx)("form",{onSubmit:f,className:"flex justify-end",children:(0,l.jsxs)("div",{className:"join",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{...n("input",{required:"* Masukan text!"}),className:"input input-primary input-sm join-item",placeholder:"Cari pasien lainnya"}),d.input&&(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text-alt text-error",children:d.input.message})})]})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("select",{...n("type",{required:"* Pilih dulu!"}),className:"select select-sm select-primary join-item",children:[(0,l.jsx)("option",{value:"norm",children:"By RM"}),(0,l.jsx)("option",{value:"nik",children:"By NIK"}),(0,l.jsx)("option",{value:"nobpjs",children:"By BPJS"}),(0,l.jsx)("option",{value:"namapasien",children:"By NAMA"}),(0,l.jsx)("option",{value:"nohp",children:"By HP"})]}),d.type&&(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text-alt text-error",children:d.type.message})})]}),c?(0,l.jsxs)("button",{className:"btn btn-sm btn-primary join-item",children:[(0,l.jsx)("span",{className:"loading loading-spinner"}),"Loading"]}):(0,l.jsx)("button",{className:"btn btn-sm btn-primary join-item ",children:"Cari"})]})}),(0,l.jsx)("dialog",{id:"modal-pasien-list",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(o.Z,{message:"List Pasien Ditemukan"})}),(0,l.jsx)("div",{className:"flex flex-col gap-2 mt-2",children:null==v?void 0:v.map(e=>{var n;return(0,l.jsxs)("div",{className:"collapse collapse-arrow bg-base-200",children:[(0,l.jsx)("input",{type:"checkbox"}),(0,l.jsxs)("div",{className:"collapse-title text-xl font-medium",children:[e.namaPasien," (",e.jenisKelamin,") / ",e.noRm," / ",x(new Date(null==e?void 0:e.tanggalLahir)).years," Tahun"]}),(0,l.jsxs)("div",{className:"collapse-content flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"self-end",children:(0,l.jsx)(p,{session:h,params:{id:null===(n=e.id)||void 0===n?void 0:n.toString()}})}),(0,l.jsx)(g,{pasien:e})]})]},e.id)})})]})}),(0,l.jsx)("dialog",{id:"modal-pasien-satuan",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(o.Z,{message:"List Pasien Ditemukan"})}),(0,l.jsxs)("p",{className:"bg-base-200 mt-2 rounded text-xl mb-2 font-medium p-3",children:[null==m?void 0:m.namaPasien," (",null==m?void 0:m.jenisKelamin,") / ",null==m?void 0:m.noRm," / ",(null==m?void 0:m.tanggalLahir)&&x(new Date(m.tanggalLahir)).years," Tahun"]}),(0,l.jsx)("div",{className:"self-end mb-2 flex flex-col",children:(0,l.jsx)(p,{session:h,params:{id:null==m?void 0:null===(e=m.id)||void 0===e?void 0:e.toString()}})}),(0,l.jsx)(g,{pasien:m})]})})]})}},92022:function(e,n,t){var l=t(57437),s=t(33514),a=t(54175),i=t(13541),r=t(2265);let o=(e,n,t,l)=>{let s=(0,i.O4)(e.getValue(n),t);return l({itemRank:s}),s.passed};function d(e){let{value:n,onChange:t,debounce:s=500,...a}=e,[i,o]=(0,r.useState)(n);return(0,r.useEffect)(()=>{o(n)},[n]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{t(i)},s);return()=>clearTimeout(e)},[i,s,t]),(0,l.jsx)("input",{...a,value:i,onChange:e=>o(e.target.value)})}n.default=function(e){let{rowsData:n,columnsData:t}=e,[i,c]=(0,r.useState)(""),u=(0,r.useMemo)(()=>t,[t]),h=(0,s.b7)({data:n||[],columns:u,state:{globalFilter:i},onGlobalFilterChange:c,globalFilterFn:o,getCoreRowModel:(0,a.sC)(),getFilteredRowModel:(0,a.vL)(),getSortedRowModel:(0,a.tj)(),getPaginationRowModel:(0,a.G_)(),getFacetedRowModel:(0,a.o6)(),getFacetedUniqueValues:(0,a.JG)()});return(0,l.jsxs)("div",{className:"overflow-x-auto gap-2 flex flex-col h-full py-2",children:[(0,l.jsx)(d,{value:null!=i?i:"",className:"input input-info input-sm max-w-xs self-end",onChange:e=>c(String(e)),placeholder:"Cari dari total ".concat(h.getPrePaginationRowModel().rows.length," data")}),(0,l.jsxs)("table",{className:"table table-sm text-center table-pin-cols",children:[(0,l.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>{var n;return(0,l.jsx)("th",{className:"bg-base-200",colSpan:e.colSpan,children:e.isPlaceholder?null:(0,l.jsxs)("button",{className:e.column.getCanSort()?"cursor-pointer select-none":"",onClick:e.column.getToggleSortingHandler(),onKeyDown:e.column.getToggleSortingHandler(),children:[(0,s.ie)(e.column.columnDef.header,e.getContext()),null!==(n=({asc:" \uD83D\uDD3C",desc:" \uD83D\uDD3D"})[e.column.getIsSorted()])&&void 0!==n?n:null]})},e.id)})},e.id))}),(0,l.jsx)("tbody",{children:h.getRowModel().rows.map(e=>(0,l.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{children:(0,s.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"join",children:[(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>h.setPageIndex(0),disabled:!h.getCanPreviousPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",children:"Page ".concat(h.getState().pagination.pageIndex+1," of ").concat(h.getPageCount())}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),(0,l.jsx)("button",{className:"join-item btn btn-xs btn-info",onClick:()=>h.setPageIndex(h.getPageCount()-1),disabled:!h.getCanNextPage(),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"})})})]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)("p",{children:" Go to page :"}),(0,l.jsx)("input",{type:"number",defaultValue:h.getState().pagination.pageIndex+1,onChange:e=>{let n=e.target.value?Number(e.target.value)-1:0;h.setPageIndex(n)},className:"input-xs w-14"})]}),(0,l.jsx)("select",{className:"select select-info select-xs",value:h.getState().pagination.pageSize,onChange:e=>{h.setPageSize(Number(e.target.value))},children:[10,20,30,40,50].map(e=>(0,l.jsxs)("option",{value:e,children:["Show ",e]},e))})]})]})}},75162:function(e,n,t){t.d(n,{o:function(){return a}});var l=t(64379),s=t.n(l);function a(e){let{icon:n,title:t}=e;s().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=s().stopTimer,e.onmouseleave=s().resumeTimer}}).fire({icon:n,title:t})}},65987:function(e,n,t){var l=t(57437);n.Z=e=>{let{message:n}=e;return(0,l.jsxs)("div",{role:"alert",className:"alert rounded",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("span",{children:n})]})}}}]);