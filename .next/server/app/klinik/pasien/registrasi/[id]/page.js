(()=>{var e={};e.id=3492,e.ids=[3492],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},15225:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(79371),t(28268),t(44465),t(35866);var r=t(23191),a=t(88716),i=t(37922),n=t.n(i),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["klinik",{children:["pasien",{children:["registrasi",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79371)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\pasien\\registrasi\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,28268)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,44465)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\pasien\\registrasi\\[id]\\page.tsx"],u="/klinik/pasien/registrasi/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/klinik/pasien/registrasi/[id]/page",pathname:"/klinik/pasien/registrasi/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},13076:(e,s,t)=>{Promise.resolve().then(t.bind(t,95651))},35047:(e,s,t)=>{"use strict";var r=t(77389);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},32060:(e,s,t)=>{"use strict";t.d(s,{ZP:()=>l});var r=t(36302),a=t(45353),i=t(17577),n=t(60922);t(77865),t(19742),t(35895),t(2718),t(68326),t(42706),t(59356),t(33073),t(84653),t(12054),t(72012),t(61092),t(60962),t(29565);var l=(0,i.forwardRef)(function(e,s){var t=(0,r.u)(e);return i.createElement(n.S,(0,a.Z)({ref:s},t))})},94453:(e,s,t)=>{"use strict";t.d(s,{v:()=>i});var r=t(10326),a=t(60962);function i(){let{pending:e}=(0,a.useFormStatus)();return r.jsx("button",{type:"submit",className:"btn btn-sm btn-primary btn-block",disabled:e,children:"Submit"})}},32859:(e,s,t)=>{"use strict";t.d(s,{o:()=>a});var r=t(12919);function a({icon:e,title:s}){r.Z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=r.Z.stopTimer,e.onmouseleave=r.Z.resumeTimer}}).fire({icon:e,title:s})}},95651:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var r=t(10326),a=t(32060),i=t(74723),n=t(17577),l=t(94453),o=t(32859),d=t(35047);let c=({idpasien:e,session:s})=>{let[t,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(""),{handleSubmit:h,formState:{errors:x},reset:m,control:j}=(0,i.cI)(),g=(0,n.useId)(),[k,v]=(0,n.useState)([]),f=(0,d.useRouter)();(0,n.useEffect)(()=>{(async()=>{let e=new Date().getDay(),t=await fetch(`/api/paramedis/getjadwaldokter?hari=${e}&idFasyankes=${s?.user.idFasyankes}`);if(!t.ok){v([]);return}v([...(await t.json()).map(e=>({value:e.id,label:`${e.dokter?.namaLengkap}-${e.dokter?.poliklinik?.kodePoli} (${e.jamPraktek})`}))])})()},[s?.user.idFasyankes]);let A=async t=>{let r={pasienData:{pasienId:Number(e),jadwalDokterId:t.jadwalDokterId.value,penjamin:t.penjamin.value,namaAsuransi:u.length>0?u:null,idFasyankes:s?.user.idFasyankes},userRole:s?.user.role,userPackage:s?.user.package};try{let e=await fetch("/api/pasien/addregistrasi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){let s=await e.json();s.message?(0,o.o)({icon:"error",title:s.message}):(0,o.o)({icon:"error",title:"Gagal simpan data!"});return}(0,o.o)({icon:"success",title:"Berhasil!"}),m(),f.refresh()}catch(e){console.log(e),(0,o.o)({icon:"error",title:"Gagal!"})}},y=e=>{e.target.value&&("ASURANSI"===e.target.value.value?c(!0):(c(!1),p("")))};return(0,r.jsxs)("form",{onSubmit:h(A),children:[(0,r.jsxs)("div",{className:"form-control w-full",children:[r.jsx("div",{className:"label",children:r.jsx("span",{className:"label-text",children:"Dokter Yang Tersedia Hari Ini"})}),r.jsx(i.Qr,{name:"jadwalDokterId",control:j,rules:{required:"*Silahkan pilih",onChange:e=>y(e)},render:({field:e})=>r.jsx(a.ZP,{...e,isClearable:!0,instanceId:g,options:k})}),x.jadwalDokterId&&r.jsx("label",{className:"label",children:r.jsx("span",{className:"label-text-alt text-error",children:x.jadwalDokterId.message?.toString()})})]}),(0,r.jsxs)("div",{className:"form-control w-full",children:[r.jsx("div",{className:"label",children:r.jsx("span",{className:"label-text",children:"Penjamin"})}),r.jsx(i.Qr,{name:"penjamin",control:j,rules:{required:"*Silahkan pilih",onChange:e=>y(e)},render:({field:e})=>r.jsx(a.ZP,{...e,isClearable:!0,instanceId:g,options:[{value:"BPJS",label:"BPJS"},{value:"PRIBADI",label:"PRIBADI"},{value:"ASURANSI",label:"ASURANSI"}]})}),x.penjamin&&r.jsx("label",{className:"label",children:r.jsx("span",{className:"label-text-alt text-error",children:x.penjamin.message?.toString()})}),t&&(0,r.jsxs)("div",{className:"form-control w-full",children:[r.jsx("div",{className:"label",children:r.jsx("span",{className:"label-text",children:"Nama Asuransi"})}),r.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"input input-primary w-full input-sm"})]})]}),s?.user.role!=="tester"&&r.jsx("div",{className:"mt-3",children:r.jsx(l.v,{})})]})}},68273:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(19510),a=t(32796),i=t(32665);let n=({pasien:e})=>{let{years:s,months:t,days:n}=(0,i.F)(new Date(e?.tanggalLahir));return r.jsx("div",{className:"card text-info-content border",children:r.jsx("div",{className:"card-body",children:(0,r.jsxs)("table",{className:"table table-zebra table-sm",children:[r.jsx("thead",{children:r.jsx("tr",{children:(0,r.jsxs)("th",{colSpan:2,className:"text-2xl",children:[e?.namaPasien," (",e?.jenisKelamin,") / ",e?.noRm," "]})})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"TEMPAT TANGGAL LAHIR"}),(0,r.jsxs)("td",{children:[": ",e?.tempatLahir,", ",e?.tanggalLahir&&(0,a.WU)(e?.tanggalLahir,"dd/MM/yyyy")," "]}),r.jsx("th",{children:"UMUR"}),(0,r.jsxs)("td",{children:[": ",`${s} Tahun ${t} Bulan ${n} Hari`]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"NIK"}),(0,r.jsxs)("td",{children:[": ",e?.nik]}),r.jsx("th",{children:"NO. BPJS"}),(0,r.jsxs)("td",{children:[": ",e?.bpjs]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"WARGANEGARA"}),(0,r.jsxs)("td",{children:[": ",e?.wargaNegara]}),r.jsx("th",{children:"PASPOR"}),(0,r.jsxs)("td",{children:[": ",e?.paspor]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"STATUS PERNIKAHAN"}),(0,r.jsxs)("td",{children:[": ",e?.statusMenikah.replace("_"," ")]}),r.jsx("th",{children:"AGAMA"}),(0,r.jsxs)("td",{children:[": ",e?.agama]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"PEKERJAAN"}),(0,r.jsxs)("td",{children:[": ",e?.pekerjaan.replace("_"," ")]}),r.jsx("th",{children:"KOTA"}),(0,r.jsxs)("td",{children:[": ",e?.kota]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"KELURAHAN"}),(0,r.jsxs)("td",{children:[": ",e?.kelurahan]}),r.jsx("th",{children:"KECAMATAN"}),(0,r.jsxs)("td",{children:[": ",e?.kecamatan]})]}),(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"ALAMAT"}),(0,r.jsxs)("td",{colSpan:3,children:[": ",e?.alamat]})]})]})]})})})}},32665:(e,s,t)=>{"use strict";t.d(s,{F:()=>n});var r=t(54987),a=t(25111),i=t(29052);let n=e=>{if(!e)return{years:"",months:"",days:""};let s=new Date,t=(0,r.b)(s,e),n=new Date(s.getFullYear(),e.getMonth(),e.getDate());n>s&&n.setFullYear(n.getFullYear()-1);let l=(0,a.j)(s,n);return{years:t,months:(0,i.d)(s,n),days:l}}},79371:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(19510),a=t(68273),i=t(68570);let n=(0,i.createProxy)(String.raw`E:\Adis\Development\_KANTOR\Core ID Smart Care\CMS LOCAL TEST\fe-klinik\src\app\klinik\pasien\pageclient\FormRegistrasi.tsx`),{__esModule:l,$$typeof:o}=n;n.default;let d=(0,i.createProxy)(String.raw`E:\Adis\Development\_KANTOR\Core ID Smart Care\CMS LOCAL TEST\fe-klinik\src\app\klinik\pasien\pageclient\FormRegistrasi.tsx#default`);var c=t(56106),u=t(32796),p=t(75571),h=t(35089);let x=async e=>{try{let s=await fetch(`http://localhost:8000/pasien/byid/${e}`,{headers:{Authorization:"Bearer testing"}});if(!s.ok)return[];return s.json()}catch(e){return console.log(e),[]}},m=async e=>{try{let s=await fetch(`http://localhost:8000/pasien/riwayatregistrasi/${e}`,{headers:{Authorization:"Bearer testing"}});if(!s.ok)return[];return s.json()}catch(e){return console.log(e),[]}},j=async({params:e})=>{let s=await (0,p.getServerSession)(h.A),t=await x(e.id),i=await m(e.id);return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx(a.Z,{pasien:t}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"w-1/2",children:[r.jsx(c.Z,{message:"Registrasi Baru"}),r.jsx(d,{idpasien:e.id,session:s})]}),(0,r.jsxs)("div",{className:"w-1/2 space-y-2",children:[r.jsx(c.Z,{message:"Riwayat registrasi pasien"}),r.jsx("div",{className:"overflow-y-auto h-80",children:r.jsx("div",{className:"flex flex-col gap-2",children:i.map(e=>(0,r.jsxs)("div",{className:"collapse collapse-arrow bg-base-200",children:[r.jsx("input",{type:"radio",name:"my-accordion-2"}),(0,r.jsxs)("div",{className:"collapse-title text-lg font-medium",children:["Episode ",e.episode,(0,r.jsxs)("p",{className:"text-xs",children:["Kunjungan : ",(0,u.WU)(e.createdAt,"dd/MM/yyyy HH:mm")]})]}),r.jsx("div",{className:"collapse-content text-xs",children:e.pendaftaran.map(e=>(0,r.jsxs)("div",{children:[r.jsx("div",{className:"divider m-0"}),(0,r.jsxs)("p",{children:["ID Regis (",e.id,") / Penjamin (",e.penjamin,")"]},e.id),(0,r.jsxs)("p",{children:["Tgl Regis (",(0,u.WU)(e.createdAt,"dd/MM/yyyy HH:mm"),")"]}),(0,r.jsxs)("p",{children:["Dokter (",e.jadwal?.dokter.namaLengkap,")"]}),(0,r.jsxs)("p",{children:["Poli (",e.jadwal?.dokter.poliklinik?.namaPoli,")"]})]},e.id))})]},e.id))})})]})]})]})}},56106:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(19510);let a=({message:e})=>(0,r.jsxs)("div",{role:"alert",className:"alert rounded",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:e})]})}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,5819,3838,2857,2481,7396,4723,3118,5194,2121],()=>t(15225));module.exports=r})();