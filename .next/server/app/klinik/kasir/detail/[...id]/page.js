(()=>{var e={};e.id=9684,e.ids=[9684],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22721:e=>{"use strict";e.exports=require("@react-pdf/renderer")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},4750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u}),r(81856),r(28268),r(44465),r(35866);var a=r(23191),n=r(88716),i=r(37922),s=r.n(i),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let u=["",{children:["klinik",{children:["kasir",{children:["detail",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,81856)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\kasir\\detail\\[...id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,28268)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,44465)),"E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\Adis\\Development\\_KANTOR\\Core ID Smart Care\\CMS LOCAL TEST\\fe-klinik\\src\\app\\klinik\\kasir\\detail\\[...id]\\page.tsx"],d="/klinik/kasir/detail/[...id]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/klinik/kasir/detail/[...id]/page",pathname:"/klinik/kasir/detail/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},26899:(e,t,r)=>{let a={"05de4135ada0749cb62c9b8dee723283365060fe":()=>Promise.resolve().then(r.bind(r,88695)).then(e=>e.getBillingDetail)};async function n(e,...t){return(await a[e]()).apply(null,t)}e.exports={"05de4135ada0749cb62c9b8dee723283365060fe":n.bind(null,"05de4135ada0749cb62c9b8dee723283365060fe")}},43477:(e,t,r)=>{Promise.resolve().then(r.bind(r,98355))},33265:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var a=r(43353),n=r.n(a)},46226:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var a=r(69029),n=r.n(a)},35047:(e,t,r)=>{"use strict";var a=r(77389);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},43353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(98052);r(10326),r(17577);let n=a._(r(77028));function i(e,t){var r;let a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let i={...a,...t};return(0,n.default)({...i,modules:null==(r=i.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},69029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let a=r(98052),n=r(23078),i=r(92481),s=a._(r(86820));function l(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=i.Image},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let a=r(94129);function n(e){let{reason:t,children:r}=e;throw new a.BailoutToCSRError(t)}},77028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let a=r(10326),n=r(17577),i=r(933),s=r(46618);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},r=(0,n.lazy)(()=>t.loader().then(l)),u=t.loading;function c(e){let l=u?(0,a.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.PreloadCss,{moduleIds:t.modules}),(0,a.jsx)(r,{...e})]}):(0,a.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(n.Suspense,{fallback:l,children:o})}return c.displayName="LoadableComponent",c}},46618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let a=r(10326),n=r(55403);function i(e){let{moduleIds:t}=e,r=(0,n.getExpectedRequestStore)("next/dynamic css"),i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,a.jsx)(a.Fragment,{children:i.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},32859:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var a=r(12919);function n({icon:e,title:t}){a.Z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.onmouseenter=a.Z.stopTimer,e.onmouseleave=a.Z.resumeTimer}}).fire({icon:e,title:t})}},98355:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(10326),n=r(17577),i=r(32859);r(15424);var s=(0,r(46242).$)("05de4135ada0749cb62c9b8dee723283365060fe"),l=r(22721);let o=(0,r(33265).default)(async()=>{},{loadableGenerated:{modules:["app\\klinik\\kasir\\pageclient\\ModalPrintKwitansi.tsx -> @react-pdf/renderer"]},ssr:!1,loading:()=>a.jsx("p",{children:"Loading..."})}),u=({tagihan:e})=>{let t=e?.billPasienDetail.reduce((e,t)=>Number(e)+Number(t.subTotal),0),r=l.StyleSheet.create({page:{padding:30},header:{flexDirection:"row",justifyContent:"space-between",marginBottom:20},companyInfo:{width:"40%"},customerInfo:{textAlign:"right",width:"60%"},logo:{width:100,height:100},title:{fontSize:24,marginBottom:10,textAlign:"center"},item:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ddd",marginBottom:5,paddingBottom:5},itemName:{width:"70%"},itemPrice:{textAlign:"right",width:"30%"},total:{textAlign:"right",fontSize:18,marginTop:20}});return a.jsx("dialog",{id:"modal-print-bill-pasien",className:"modal",children:(0,a.jsxs)("div",{className:"modal-box w-8/12 max-w-2xl",children:[a.jsx("form",{method:"dialog",children:a.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"âœ•"})}),a.jsx(o,{className:"w-full h-80",children:a.jsx(l.Document,{children:(0,a.jsxs)(l.Page,{style:r.page,children:[a.jsx(l.View,{style:r.header}),a.jsx(l.Text,{style:r.title,children:"Invoice Pasien"}),(0,a.jsxs)(l.View,{style:r.item,children:[a.jsx(l.Text,{style:r.itemName,children:"Item"}),a.jsx(l.Text,{style:r.itemPrice,children:"Sub Total"})]}),e?.billPasienDetail.map(e=>a.jsxs(l.View,{style:r.item,children:[a.jsxs(l.Text,{style:r.itemName,children:[e.deskripsi," ",e.jumlah,"@",e.harga]}),a.jsx(l.Text,{style:r.itemPrice,children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.subTotal))})]},e.id)),(0,a.jsxs)(l.Text,{style:r.total,children:["Total: ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(t))]}),e?.pembayaranBill.map(e=>a.jsxs(l.View,{children:[a.jsxs(l.Text,{style:r.total,children:["Diskon: ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.totalDiskon))]}),a.jsxs(l.Text,{style:r.total,children:["Pajak: ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.totalPajak))]}),a.jsxs(l.Text,{style:r.total,children:["Total Bayar: ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.totalBayar))]}),a.jsxs(l.Text,{style:r.total,children:["Kembalian : ",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.kembalian))]})]},e.id)),(0,a.jsxs)(l.Text,{style:r.total,children:["Status: ",e?.status]})]})})})]})})};var c=r(35047);let d=({detailBill:e})=>{let[t,r]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),[d,m]=(0,n.useState)(0),[p,f]=(0,n.useState)(0),[h,b]=(0,n.useState)(0),[x,y]=(0,n.useState)(0),[g,j]=(0,n.useState)(0),[P,v]=(0,n.useState)(0),[N,k]=(0,n.useState)(),w=(0,c.useRouter)();(0,n.useEffect)(()=>{f(e?.billPasienDetail.reduce((e,t)=>Number(e)+Number(t.subTotal),0)),m(e?.billPasienDetail.reduce((e,t)=>Number(e)+Number(t.subTotal),0))},[e]);let S=e=>{r(e),I(Number(e),Number(l))},D=e=>{o(e),I(Number(t),Number(e))},I=(e,t)=>{let r=e/100*p;j(r);let a=p-r,n=t/100*a;v(n),m(a+n)},_=e=>{0===Number(e)?b(0):(y(Number(e)),b(Number(e)-d))},T=async()=>{if(0===x)(0,i.o)({icon:"error",title:"Pembayaran harus diisi!"});else if(x<d)(0,i.o)({icon:"error",title:"Pembayaran harus lebih besar/sama dengan total tagihan!"});else{let t={id:e.id,pendaftaranId:e.pendaftaranId,bayar:x,total:d,totalDiskon:g,totalPajak:P,kembali:h,tglBayar:new Date};try{if(!(await fetch("/api/kasir/bayar",{method:"POST",body:JSON.stringify(t)})).ok){(0,i.o)({icon:"error",title:"Gagal simpan data!"});return}(0,i.o)({icon:"success",title:"Berhasil!"}),w.refresh()}catch(e){console.log(e),(0,i.o)({icon:"error",title:e.message})}}},O=async e=>{let t=await s(e);t.status?(k(t.data),await new Promise(e=>setTimeout(e,2e3)),(document?.getElementById("modal-print-bill-pasien")).showModal()):(0,i.o)({icon:"error",title:t.message})};return(0,a.jsxs)("div",{children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table table-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{}),a.jsx("th",{children:"Deskripsi"}),a.jsx("th",{children:"Jumlah"}),a.jsx("th",{children:"Harga"}),a.jsx("th",{children:"Total"})]})}),(0,a.jsxs)("tbody",{children:[e.billPasienDetail.map((e,t)=>(0,a.jsxs)("tr",{children:[a.jsx("th",{children:t+1}),a.jsx("td",{children:e.deskripsi}),a.jsx("td",{children:e.jumlah}),a.jsx("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.harga))}),a.jsx("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.subTotal))})]},e.id)),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Sub Total"}),a.jsx("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(p)})]}),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Diskon %"}),a.jsx("td",{children:a.jsx("input",{type:"number",value:t,onChange:e=>S(e.target.value),className:"input input-sm input-primary"})})]}),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Pajak %"}),a.jsx("td",{children:a.jsx("input",{type:"number",onChange:e=>D(e.target.value),value:l,className:"input input-sm input-primary"})})]}),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Total"}),a.jsx("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(d)})]}),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Jumlah Pembayaran"}),a.jsx("td",{children:a.jsx("input",{type:"number",onChange:e=>_(e.target.value),className:"input input-sm input-primary"})})]}),(0,a.jsxs)("tr",{className:"font-semibold",children:[a.jsx("td",{colSpan:4,className:"text-right",children:"Kembali"}),a.jsx("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(h)})]}),a.jsx("tr",{children:a.jsx("td",{colSpan:5,children:"LUNAS"===e.status?(0,a.jsxs)("div",{className:"flex flex-col gap-3 mt-5",children:[a.jsx("button",{className:"btn btn-success btn-sm",children:"LUNAS"}),a.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>O(e.id),children:"CETAK KWITANSI"})]}):a.jsx("button",{onClick:()=>T(),className:"btn btn-primary btn-sm btn-block",children:"BAYAR"})})})]})]})}),a.jsx(u,{tagihan:N})]})}},69955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},75571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var n=r(69955);Object.keys(n).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(45609));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},81856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(19510),n=r(68570);let i=(0,n.createProxy)(String.raw`E:\Adis\Development\_KANTOR\Core ID Smart Care\CMS LOCAL TEST\fe-klinik\src\app\klinik\kasir\pageclient\DetailBillPasiten.tsx`),{__esModule:s,$$typeof:l}=i;i.default;let o=(0,n.createProxy)(String.raw`E:\Adis\Development\_KANTOR\Core ID Smart Care\CMS LOCAL TEST\fe-klinik\src\app\klinik\kasir\pageclient\DetailBillPasiten.tsx#default`),u=async e=>{try{let t=await fetch(`http://localhost:8000/kasir/getbyidpendaftaran/${e}`,{headers:{Authorization:"Bearer testing"},cache:"no-cache"});if(!t.ok)return[];return t.json()}catch(e){return console.log(e),[]}},c=async({params:e})=>{let t=e.id[0],r=await u(t);return a.jsx(o,{detailBill:r})}},88695:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getBillingDetail:()=>i});var a=r(27745);r(26461);var n=r(20439);async function i(e){try{let t=await n.default.billPasien.findFirst({include:{pembayaranBill:!0,billPasienDetail:!0,Pendaftaran:{include:{episodePendaftaran:{include:{pasien:!0}}}}},where:{id:e}});return{status:!0,message:"Berhasil",data:t}}catch(e){return{status:!1,message:e,data:"null"}}}(0,r(85723).ensureServerEntryExports)([i]),(0,a.registerServerReference)("05de4135ada0749cb62c9b8dee723283365060fe",i)},20439:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(53524);let n=globalThis.prismaGlobal??new a.PrismaClient}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5819,3838,2857,2481,7396,362,2121],()=>r(4750));module.exports=a})();